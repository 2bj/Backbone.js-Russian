<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <link rel="icon" href="docs/images/favicon.ico" />
  <title>Backbone.js по-русски</title>
  <style>
    body {
      font-size: 14px;
      line-height: 22px;
      font-family: Helvetica Neue, Helvetica, Arial;
      background: #f4f4f4 url(docs/images/background.png);
    }
    .interface {
      font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, sans-serif !important;
    }
    div#sidebar {
      background: #fff;
      position: fixed;
      top: 0; left: 0; bottom: 0;
      width: 200px;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
      padding: 15px 0 30px 30px;
      border-right: 1px solid #bbb;
      box-shadow: 0 0 20px #ccc; -webkit-box-shadow: 0 0 20px #ccc; -moz-box-shadow: 0 0 20px #ccc;
    }
      a.toc_title, a.toc_title:visited {
        display: block;
        color: black;
        font-weight: bold;
        margin-top: 15px;
      }
        a.toc_title:hover {
          text-decoration: underline;
        }
        #sidebar .version {
          font-size: 10px;
          font-weight: normal;
        }
      ul.toc_section {
        font-size: 11px;
        line-height: 14px;
        margin: 5px 0 0 0;
        padding-left: 0px;
        list-style-type: none;
        font-family: Lucida Grande;
      }
        .toc_section li {
          cursor: pointer;
          margin: 0 0 3px 0;
        }
          .toc_section li a {
            text-decoration: none;
            color: black;
          }
            .toc_section li a:hover {
              text-decoration: underline;
            }
    div.container {
      position: relative;
      width: 550px;
      margin: 40px 0 50px 260px;
    }
    div.run {
      position: absolute;
      right: 15px;
      width: 26px; height: 18px;
      background: url('docs/images/arrows.png') no-repeat -26px 0;
    }
      div.run:active {
        background-position: -51px 0;
      }
    p, div.container ul {
      margin: 25px 0;
      width: 550px;
    }
      p.warning {
        font-size: 12px;
        line-height: 18px;
        font-style: italic;
      }
      div.container ul {
        list-style: circle;
        padding-left: 15px;
        font-size: 13px;
        line-height: 18px;
      }
        div.container ul li {
          margin-bottom: 10px;
        }
        div.container ul.small {
          font-size: 12px;
        }
    a, a:visited {
      color: #444;
    }
    a:active, a:hover {
      color: #000;
    }
    a.punch {
      display: inline-block;
      background: #4162a8;
      border-top: 1px solid #38538c;
      border-right: 1px solid #1f2d4d;
      border-bottom: 1px solid #151e33;
      border-left: 1px solid #1f2d4d;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      -ms-border-radius: 4px;
      -o-border-radius: 4px;
      border-radius: 4px;
      -webkit-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -moz-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -ms-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -o-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      color: #fff;
      font: bold 14px "helvetica neue", helvetica, arial, sans-serif;
      line-height: 1;
      margin-bottom: 15px;
      padding: 8px 0 10px 0;
      text-align: center;
      text-shadow: 0px -1px 1px #1e2d4d;
      text-decoration: none;
      width: 225px;
      -webkit-background-clip: padding-box; }
      a.punch:hover {
        -webkit-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -moz-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -ms-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -o-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        cursor: pointer; }
      a.punch:active {
        -webkit-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -moz-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -ms-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -o-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        margin-top: 5px; margin-bottom: 10px }
    a img {
      border: 0;
    }
    h1, h2, h3, h4, h5, h6 {
      padding-top: 20px;
    }
      h2 {
        font-size: 22px;
      }
    b.header {
      font-size: 18px;
      line-height: 35px;
    }
    span.alias {
      font-size: 14px;
      font-style: italic;
      margin-left: 20px;
    }
    table {
      margin: 15px 0 0; padding: 0;
    }
      tr, td {
        margin: 0; padding: 0;
      }
        td {
          padding: 0px 15px 5px 0;
        }
    code, pre, tt {
      font-family: Monaco, Consolas, "Lucida Console", monospace;
      font-size: 12px;
      line-height: 18px;
      font-style: normal;
    }
      tt {
        padding: 0px 3px;
        background: #fff;
        border: 1px solid #ddd;
        zoom: 1;
      }
      code {
        margin-left: 20px;
      }
      pre {
        font-size: 12px;
        padding: 2px 0 2px 15px;
        border: 4px solid #bbb; border-top: 0; border-bottom: 0;
        margin: 0px 0 25px;
      }
      img.example_image {
        margin: 0px auto;
      }
  </style>
</head>
<body>

  <div id="sidebar" class="interface">

    <a class="toc_title" href="#">
      Backbone.js <span class="version">(0.9.2)</span>
    </a>
    <ul class="toc_section">
      <li>&raquo; <a href="http://github.com/documentcloud/backbone">Репозиторий GitHub</a></li>
      <li>&raquo; <a href="docs/backbone.html">Аннотированный исходный код</a></li>
    </ul>

    <a class="toc_title" href="#introduction">
      Введение
    </a>

    <a class="toc_title" href="#upgrading">
      Апгрейд
    </a>

    <a class="toc_title" href="#Events">
      События (Events)
    </a>
    <ul class="toc_section">
      <li>– <a href="#Events-on">on</a></li>
      <li>– <a href="#Events-off">off</a></li>
      <li>– <a href="#Events-trigger">trigger</a></li>
    </ul>

    <a class="toc_title" href="#Model">
      Модель (Model)
    </a>
    <ul class="toc_section">
      <li>– <a href="#Model-extend">extend</a></li>
      <li>– <a href="#Model-constructor">constructor / initialize</a></li>
      <li>– <a href="#Model-get">get</a></li>
      <li>– <a href="#Model-set">set</a></li>
      <li>– <a href="#Model-escape">escape</a></li>
      <li>– <a href="#Model-has">has</a></li>
      <li>– <a href="#Model-unset">unset</a></li>
      <li>– <a href="#Model-clear">clear</a></li>
      <li>– <a href="#Model-id">id</a></li>
      <li>– <a href="#Model-idAttribute">idAttribute</a></li>
      <li>– <a href="#Model-cid">cid</a></li>
      <li>– <a href="#Model-attributes">attributes</a></li>
      <li>– <a href="#Model-changed">changed</a></li>
      <li>– <a href="#Model-defaults">defaults</a></li>
      <li>– <a href="#Model-toJSON">toJSON</a></li>
      <li>– <a href="#Model-fetch">fetch</a></li>
      <li>– <a href="#Model-save">save</a></li>
      <li>– <a href="#Model-destroy">destroy</a></li>
      <li>– <a href="#Model-validate">validate</a></li>
      <li>– <a href="#Model-isValid">isValid</a></li>
      <li>– <a href="#Model-url">url</a></li>
      <li>– <a href="#Model-urlRoot">urlRoot</a></li>
      <li>– <a href="#Model-parse">parse</a></li>
      <li>– <a href="#Model-clone">clone</a></li>
      <li>– <a href="#Model-isNew">isNew</a></li>
      <li>– <a href="#Model-change">change</a></li>
      <li>– <a href="#Model-hasChanged">hasChanged</a></li>
      <li>– <a href="#Model-changedAttributes">changedAttributes</a></li>
      <li>– <a href="#Model-previous">previous</a></li>
      <li>– <a href="#Model-previousAttributes">previousAttributes</a></li>
    </ul>

    <a class="toc_title" href="#Collection">
      Коллекции (Collection)
    </a>
    <ul class="toc_section">
      <li>– <a href="#Collection-extend">extend</a></li>
      <li>– <a href="#Collection-model">model</a></li>
      <li>– <a href="#Collection-constructor">constructor / initialize</a></li>
      <li>– <a href="#Collection-models">models</a></li>
      <li>– <a href="#Collection-toJSON">toJSON</a></li>
      <li>– <a href="#Collection-Underscore-Methods"><b>Underscore Methods (28)</b></a></li>
      <li>– <a href="#Collection-add">add</a></li>
      <li>– <a href="#Collection-remove">remove</a></li>
      <li>– <a href="#Collection-get">get</a></li>
      <li>– <a href="#Collection-getByCid">getByCid</a></li>
      <li>– <a href="#Collection-at">at</a></li>
      <li>– <a href="#Collection-push">push</a></li>
      <li>– <a href="#Collection-pop">pop</a></li>
      <li>– <a href="#Collection-unshift">unshift</a></li>
      <li>– <a href="#Collection-shift">shift</a></li>
      <li>– <a href="#Collection-length">length</a></li>
      <li>– <a href="#Collection-comparator">comparator</a></li>
      <li>– <a href="#Collection-sort">sort</a></li>
      <li>– <a href="#Collection-pluck">pluck</a></li>
      <li>– <a href="#Collection-where">where</a></li>
      <li>– <a href="#Collection-url">url</a></li>
      <li>– <a href="#Collection-parse">parse</a></li>
      <li>– <a href="#Collection-fetch">fetch</a></li>
      <li>– <a href="#Collection-reset">reset</a></li>
      <li>– <a href="#Collection-create">create</a></li>
    </ul>

    <a class="toc_title" href="#Router">
      Роутер (Router)
    </a>
    <ul class="toc_section">
      <li>– <a href="#Router-extend">extend</a></li>
      <li>– <a href="#Router-routes">routes</a></li>
      <li>– <a href="#Router-constructor">constructor / initialize</a></li>
      <li>– <a href="#Router-route">route</a></li>
      <li>– <a href="#Router-navigate">navigate</a></li>
    </ul>

    <a class="toc_title" href="#History">
      История (History)
    </a>
    <ul class="toc_section">
      <li>– <a href="#History-start">start</a></li>
    </ul>

    <a class="toc_title" href="#Sync">
      Синхронизация (Sync)
    </a>
    <ul class="toc_section">
      <li>– <a href="#Sync">Backbone.sync</a></li>
      <li>– <a href="#Sync-emulateHTTP">Backbone.emulateHTTP</a></li>
      <li>– <a href="#Sync-emulateJSON">Backbone.emulateJSON</a></li>
    </ul>

    <a class="toc_title" href="#View">
      Представление (View)
    </a>
    <ul class="toc_section">
      <li>– <a href="#View-extend">extend</a></li>
      <li>– <a href="#View-constructor">constructor / initialize</a></li>
      <li>– <a href="#View-el">el</a></li>
      <li>– <a href="#View-$el">$el</a></li>
      <li>– <a href="#View-setElement">setElement</a></li>
      <li>– <a href="#View-attributes">attributes</a></li>
      <li>– <a href="#View-dollar">$ (jQuery или Zepto)</a></li>
      <li>– <a href="#View-render">render</a></li>
      <li>– <a href="#View-remove">remove</a></li>
      <li>– <a href="#View-make">make</a></li>
      <li>– <a href="#View-delegateEvents">delegateEvents</a></li>
      <li>– <a href="#View-undelegateEvents">undelegateEvents</a></li>
    </ul>

    <a class="toc_title" href="#Utility">
      Утилитные методы (Utility)
    </a>
    <ul class="toc_section">
      <li>– <a href="#Utility-noConflict">noConflict</a></li>
      <li>– <a href="#Utility-setDomLibrary">setDomLibrary</a></li>
    </ul>

    <a class="toc_title" href="#examples">
      Примеры (Examples)
    </a>
    <ul class="toc_section">
      <li>– <a href="#examples-todos">Todos</a></li>
      <li>– <a href="#examples-documentcloud">DocumentCloud</a></li>
      <li>– <a href="#examples-linkedin">LinkedIn Mobile</a></li>
      <li>– <a href="#examples-flow">Flow</a></li>
      <li>– <a href="#examples-audiovroom">AudioVroom</a></li>
      <li>– <a href="#examples-foursquare">Foursquare</a></li>
      <li>– <a href="#examples-wunderkit">Wunderkit</a></li>
      <li>– <a href="#examples-khan-academy">Khan Academy</a></li>
      <li>– <a href="#examples-do">Do</a></li>
      <li>– <a href="#examples-posterous">Posterous Spaces</a></li>
      <li>– <a href="#examples-groupon">Groupon Now!</a></li>
      <li>– <a href="#examples-basecamp">Basecamp Mobile</a></li>
      <li>– <a href="#examples-slavery-footprint">Slavery Footprint</a></li>
      <li>– <a href="#examples-stripe">Stripe</a></li>
      <li>– <a href="#examples-airbnb">Airbnb Mobile</a></li>
      <li>– <a href="#examples-diaspora">Diaspora</a></li>
      <li>– <a href="#examples-soundcloud">SoundCloud Mobile</a></li>
      <li>– <a href="#examples-pandora">Pandora</a></li>
      <li>– <a href="#examples-code-school">Code School</a></li>
      <li>– <a href="#examples-cloudapp">CloudApp</a></li>
      <li>– <a href="#examples-seatgeek">SeatGeek</a></li>
      <li>– <a href="#examples-grove">Grove.io</a></li>
      <li>– <a href="#examples-kicksend">Kicksend</a></li>
      <li>– <a href="#examples-shortmail">Shortmail</a></li>
      <li>– <a href="#examples-battlefield">Battlefield Play4Free</a></li>
      <li>– <a href="#examples-salon">Salon.io</a></li>
      <li>– <a href="#examples-tilemill">TileMill</a></li>
      <li>– <a href="#examples-blossom">Blossom</a></li>
      <li>– <a href="#examples-animoto">Animoto</a></li>
      <li>– <a href="#examples-chaincal">ChainCal</a></li>
      <li>– <a href="#examples-attictv">AtticTV</a></li>
      <li>– <a href="#examples-decide">Decide</a></li>
      <li>– <a href="#examples-editd">EDITD</a></li>
      <li>– <a href="#examples-trello">Trello</a></li>
      <li>– <a href="#examples-ducksboard">Ducksboard</a></li>
      <li>– <a href="#examples-quietwrite">QuietWrite</a></li>
      <li>– <a href="#examples-tzigla">Tzigla</a></li>
    </ul>

    <a class="toc_title" href="#faq">
      F.A.Q.
    </a>
    <ul class="toc_section">
      <li>– <a href="#FAQ-events">Каталог событий</a></li>
      <li>– <a href="#FAQ-tim-toady">Большо одного способа сделать это</a></li>
      <li>– <a href="#FAQ-nested">Вложенные модели и коллекции</a></li>
      <li>– <a href="#FAQ-bootstrap">Загрузка подготовленных моделей</a></li>
      <li>– <a href="#FAQ-extending">Расширяем Backbone</a></li>
      <li>– <a href="#FAQ-mvc">Традиционное MVC</a></li>
      <li>– <a href="#FAQ-this">Связка "this"</a></li>
      <li>– <a href="#FAQ-rails">Работа с Rails</a></li>
    </ul>

    <a class="toc_title" href="#changelog">
      Чейнджлог
    </a>

  </div>

  <div class="container">

    <p>
      <img style="width: 451px; height: 150px;" src="docs/images/backbone.png" alt="Backbone.js" />
    </p>

    <p>
      Backbone.js придает структуру веб-приложениям с помощью
      <b>моделей</b> с биндингами по ключу и кастомными событиями,
      <b>коллекций</b> с богатым набором методов с перечислимыми сущностями,
      <b>представлений</b> с декларативной обработкой событий; и соединяет это все
      с вашим существующим REST-овым JSON API.
    </p>

    <p>
      Проект <a href="http://github.com/documentcloud/backbone/">размещается на GitHub</a>,
      с доступным <a href="docs/backbone.html">аннотированным исходным кодом</a>,
      с онлайновыми <a href="test/test.html">тестами</a>,
      с <a href="examples/todos/index.html">примером приложения</a>,
      со <a href="https://github.com/documentcloud/backbone/wiki/Tutorials%2C-blog-posts-and-example-sites">списком туториалов</a>
      и <a href="#examples">большим списком реальных проектов</a>, которые используют Backbone.
      Backbone доступен под <a href="http://github.com/documentcloud/backbone/blob/master/LICENSE">лицензией MIT</a>.
    </p>

    <p>
      Оставляйте баг-репорты и обсуждайте фичи на
      <a href="http://github.com/documentcloud/backbone/issues">в багтрекере на GitHub'е</a>,
      на IRC-канале Freenode <tt>#documentcloud</tt>, задавайте вопросы в
      <a href="https://groups.google.com/forum/#!forum/backbonejs">группу Google</a>,
      добавляйте страницы в <a href="https://github.com/documentcloud/backbone/wiki">вики</a>,
      или шлите твиты <a href="http://twitter.com/documentcloud">@documentcloud</a>.
    </p>

    <p>
      <i>
        Backbone — это компонент <a href="http://documentcloud.org/">DocumentCloud</a> c открытым исходным кодом.
      </i>
    </p>

    <h2 id="downloads">
      Загрузка и зависимости
      <span style="padding-left: 7px; font-size:11px; font-weight: normal;" class="interface">(ПКМ и "Сохранить как")</span>
    </h2>

    <table>
      <tr>
        <td><a class="punch" href="backbone.js">Версия для разработки (0.9.2)</a></td>
        <td><i>52кб, полный код, много комментариев</i></td>
      </tr>
      <tr>
        <td><a class="punch" href="backbone-min.js">Production-версия (0.9.2)</a></td>
        <td><i>5.6кб, упакованная и gzip-ованная</i></td>
      </tr>
    </table>

    <p>
      Единственная жетская зависимость в Backbone —
      <a href="http://documentcloud.github.com/underscore/">Underscore.js</a> <small>( > 1.3.1)</small>.
      Для RESTful-персистентности, поддержки истории с помощью <a href="#Router">Backbone.Router</a>
      и операций с DOM в <a href="#View">Backbone.View</a>, подключите
      <a href="https://github.com/douglascrockford/JSON-js">json2.js</a>, и либо
      <a href="http://jquery.com">jQuery</a> <small>( > 1.4.2)</small> либо
      <a href="http://zeptojs.com/">Zepto</a>.
    </p>

    <h2 id="introduction">Введение</h2>

    <p>
    	При работе с веб-приложением, которое включает в себя много JavaScript,
      первое, чему вы научитесь это перестать связывать ваши данные с DOM.
      Это подходит для создания простых JavaScript приложений,
      которые в конечном итоге выглядят,
      как запутанные груды JQuery селекторов и функций обратного вызова (callback),
      которые отчаянно пытаются хранить данные в синхронизации между HTML UI,
      вашей JavaScript логики и базы данных на сервере.
      Для сложных клиентских приложений, часто бывает полезным более структурированный подход.
    </p>

    <p>
      С Backbone, вы представляете ваши данные как <a href="#Model">Модели (Models)</a>,
      которые могут быть созданы, провалидированы, удалены, и сохранены на сервере.
      Всякий раз, когда в интерфейсе изменяется атрибуты модели, модель вызывает событие <i>"change"</i>;
      все <a href="#View">Представления (Views)</a>,
      которые отображают состояние модели, могут быть уведомлены об изменении атрибутов модели,
      с тем чтобы они могли отреагировать соответствующим образом. Например
      отрисовать себя с новой информацией.
      В готовом приложении на Backbone, вы не должны писать код,
      который ищет элемент с определенным идентификатором в DOM
      и обновлять HTML вручную. При изменении модели, представление просто обновит себя самостоятельно.
    </p>

    <p>
      Если вы новичок здесь, и еще не совсем уверены, что Backbone вам подходит,
      начните с просмотра <a href="#examples">списка проектов использующих Backbone</a>.
    </p>

    <p>
      Многие из следующих примеров рабоспосбоны.
      Нажмите кнопку <i>play</i>, чтобы выполнить их.
    </p>

    <h2 id="upgrading">Upgrading to 0.9</h2>

    <p>
      Backbone's <b>0.9</b> series should be considered as a release candidate
      for an upcoming <b>1.0</b>. Some APIs have changed, and while there is a
      <a href="#changelog">change log</a> available, and many new features to
      take advantage of, there are a few specific changes where you'll need
      to take care:
    </p>

    <ul>
      <li>
        If you've ever manually set <tt>this.el</tt> in a Backbone View to be a
        particular DOM element, you'll want to use
        <a href="#View-setElement">setElement</a> instead.
      </li>
      <li>
        Creating and destroying models is now optimistic. Pass <tt>{wait: true}</tt>
        if you need the previous behavior of waiting for the server to acknowledge
        success. You can now also pass <tt>{wait: true}</tt> to <a href="#Model-save">save</a> calls.
      </li>
      <li>
        If you have been writing a fair amount of <tt>$(view.el)</tt>, there's now
        a cached reference for that jQuery object: <a href="#View-$el">$el</a>.
      </li>
      <li>
        If you're upgrading, make sure you also upgrade your version of Underscore.js
        to the latest &mdash; 1.3.1 or greater.
      </li>
      <li>
        <tt>model.set</tt> will no longer trigger change events when setting a value
        with <tt>{silent: true}</tt> then setting it back to its original value.
        Similarly, after changing an attribute silently, that <tt>change:attribute</tt>
        event <i>will</i> fire during the next change.
      </li>
      <li>
        Since <tt>view.$(selector)</tt> is now equivalent to <tt>view.$el.find(selector)</tt>
        rather than <tt>$(selector, view.el)</tt> it can no longer be used when
        <tt>selector</tt> is an HTML string or DOM element.
      </li>
    </ul>

    <h2 id="Events">Backbone.Events</h2>

    <p>
    	<b>Events</b> &mdash; это модуль, который может расширить возможности любого объекта,
    	давая объекту способностью отслеживать и вызывать пользовательские именованные события.
    	События не должны быть объявлены прежде, чем будут расширены возможности объекта.
    	В событие можно передавать аргументы. Например:
    </p>

<pre class="runnable">
var object = {};

_.extend(object, Backbone.Events);

object.on("alert", function(msg) {
  alert("Сработало " + msg);
});

object.trigger("alert", "событие");
</pre>

    <p>
    	Например, можно сделать удобный диспетчер событий,
    	который будет координировать события между различными областями приложения:<br/>
    	<tt>var dispatcher = _.clone(Backbone.Events)</tt>
    </p>

    <p id="Events-on">
      <b class="header">on</b><code>object.on(event, callback, [context])</code><span class="alias">Синоним: bind</span>
      <br />
      Привязывает функцию обратного вызова <b>callback</b> к объекту.
      Callback-функция будет вызываться всякий раз, когда <b>событие</b> возникает.
      Если у вас используется множество различных событий на странице, следует использовать двоеточия в названиях:
      <tt>"poll:start"</tt>, или <tt>"change:selection"</tt>.
      Строка названия события (event) может состоять из разделенных пробелами нескольких событий...
    </p>

<pre>
book.on("change:title change:author", ...);
</pre>

    <p>
      Для сохранения в <b>context</b> значения <tt>this</tt>,
      при вызове callback-функции,
      передайте третий необязательный аргумент:<br/>
      <tt>model.on('change', this.render, this)</tt>
    </p>

    <p>
      Существует специальное значение <tt>"all"</tt>,
      которое необходимо указать в качестве названия события в callback-функции.
      Такая callback-функция будет срабатывать при возникновении любого события.
      Название события будет передаваться в первом аргументе.
      Это можно использовать, например, для проксирования всех событий от одного объекта к другому:
    </p>

<pre>
proxy.on("all", function(eventName) {
  object.trigger(eventName);
});
</pre>

    <p id="Events-off">
      <b class="header">off</b><code>object.off([event], [callback], [context])</code><span class="alias">Синоним: unbind</span>
      <br />
      Удаляет привязанную ранее callback-функцию от объекта.
      Если параметр <b>context</b> не задан, все версии callback-функции в разных контекстах, будут удалены.

      Если callback-функция не указана, все функции обратного вызова для события <b>event</b> будут удалены.
      Если событие не указано, <b>все</b> callback-функции события на объекте будут удалены.
    </p>

<pre>
// Удаляет только callback-функцию `onChange`.
object.off("change", onChange);

// Удаляет все callback-функции для события "change".
object.off("change");

// Удаляет все callback-функции `onChange` для всех событий.
object.off(null, onChange);

// Удаляет все callback-функции в контексте `context` для всех событий.
object.off(null, null, context);

// Удаляет все callback-функции для объекта `object`.
object.off();
</pre>

    <p id="Events-trigger">
      <b class="header">trigger</b><code>object.trigger(event, [*args])</code>
      <br />
      Вызов callback-функции для данного события <b>event</b> или группы событий разделенных пробелами.
      Последующие аргументы в <b>trigger</b> будут переданы вместе с событием в callback-функцию.
    </p>

    <h2 id="Model">Backbone.Model</h2>

    <p>
      <b>Модели</b> — это самое сердце любого JavaScript-приложения.
      Они содержат как интерактивные данные, так и большую часть соответствующей логики:
	    конвертации, валидации, вычисленные свойства, и контроль доступа. Вы расширяете
  	  <b>Backbone.Model</b> своими доменно-специфичными методами, а <b>Model</b>
	    предоставляет базовый набор функциональности по управлению изменениями.
    </p>

    <p>
      Нижеприведенный пример спорен, но он демонстрирует определение модели с кастомным
	    методом, установку атрибута, и запуск события, привязанного к этому атрибуту.
      После запуска этого кода <tt>sidebar</tt> станет доступен  консоли браузера,
	    так что можно будет с ним поиграться.
    </p>

<pre class="runnable">
var Sidebar = Backbone.Model.extend({
  promptColor: function() {
    var cssColor = prompt("Пожалуйста, введите CSS-цвет:");
    this.set({color: cssColor});
  }
});

window.sidebar = new Sidebar;

sidebar.on('change:color', function(model, color) {
  $('#sidebar').css({background: color});
});

sidebar.set({color: 'white'});

sidebar.promptColor();
</pre>

    <p id="Model-extend">
      <b class="header">extend</b><code>Backbone.Model.extend(properties, [classProperties])</code>
      <br />
      Чтобы создать свой собственный класс моделей, нужно расширить <b>Backbone.Model</b>
      и предоставить свойства экземпляра в параметре <b>properties</b>; опциональный параметр
      <b>classProperties</b> отвечает за свойства, которые будут прицеплены напрямую к функции-конструктору.
    </p>

    <p>
      <b>extend</b> корректно устанавливает цепочку прототипов, так что дочерние классы,
	    созданные с помощью <b>extend</b> могут дальше расширяться и наследоваться, сколько угодно.
    </p>

<pre>
var Note = Backbone.Model.extend({

  initialize: function() { ... },

  author: function() { ... },

  coordinates: function() { ... },

  allowedToEdit: function(account) {
    return true;
  }

});

var PrivateNote = Note.extend({

  allowedToEdit: function(account) {
    return account.owns(this);
  }

});
</pre>

    <p class="warning">
      Небольшое замечание о <tt>super</tt>: JavaScript не предоставляет простого способа
      вызвать родительский метод &mdash; функцию с таким же именем, определенную выше
      в цепочке прототипов. Если вы переопределяете функцию ядра, например
      <tt>set</tt>, или <tt>save</tt>, и хотите вызвать родительскую имплементацию,
  	  вам придется вручную вызвать ее примерно вот так:
    </p>

<pre>
var Note = Backbone.Model.extend({
  set: function(attributes, options) {
    Backbone.Model.prototype.set.call(this, attributes, options);
    ...
  }
});
</pre>

    <p id="Model-constructor">
      <b class="header">constructor / initialize</b><code>new Model([attributes], [options])</code>
      <br />
      Создавая экземпляр модели, вы можете передать начальные значения атрибутов
	    в параметре <b>attributes</b>, которые будут переданы в метод <a href="#Model-set">set</a> модели.
	    Если вы определите функцию <b>initialize</b>, она будет вызвана после создания модели.
    </p>

<pre>
new Book({
  title: "Тысяча и одна ночь",
  author: "Шахерезада"
});
</pre>

    <p>
      В редких случаях, если вам досталось что-то особенное (if you're looking to get fancy),
      вы можете захотеть переопределить <b>constructor</b>, что позволит заменить
      настоящую функцию-конструктор для вашей модели.
    </p>

    <p>
      Если вы передаете <tt>{collection: ...}</tt> в качестве параметра <b>options</b>,
	    модель получит свойство <tt>collection</tt>, которое будет использовано для индикации того,
	    к какой коллекции принадлежит данная модель, и для того, чтобы вычислить свойство
      <a href="#Model-url">url</a>. В противном случае свойство <tt>model.collection</tt>
	    будет добавлено автоматически в момент первого добавления модели в коллекцию.
    </p>

    <p id="Model-get">
      <b class="header">get</b><code>model.get(attribute)</code>
      <br />
      Отдает текущее значение атрибута модели, например:
      <tt>note.get("title")</tt>
    </p>

    <p id="Model-set">
      <b class="header">set</b><code>model.set(attributes, [options])</code>
      <br />
      Хэш <b>attributes</b> устанавливает значения атрибутам (одному или многим).
  	  Если любой из атрибутов изменяет состояние модели, то сработает событие <tt>"change"</tt> —
	    если только вы не передали <tt>{silent: true}</tt> в параметре <b>option</b>. События изменения
	    для каждого из атрибутов (например, <tt>change:title</tt>, или <tt>change:content</tt>)
	    сработают точно так же, и вы точно так же можете привязать к ним слушатели.<br />
	    Так же можно передавать отдельный ключ и значение:
    </p>

<pre>
note.set({title: "20-ого марта", content: "В его глазах она затмевала…"});

book.set("title", "Скандал в Богемии");
</pre>

    <p>
      Если у модели определен метод <a href="#Model-validate">validate</a>,
      значения будут отвалидированы перед установкой атрибутов. Если значения не пройдут валидацию,
      изменений не произойдет, и <b>set</b> вернет <tt>false</tt>. В противном случае <b>set</b>
	    возвращает ссылку на экземпляр модели.
      Также можно передать <tt>error</tt>-коллбэк в <b>options</b>, который будет
	    вызван вместо запуска события <tt>"error"</tt>, если валидация провалится.
      Если передать <tt>{silent: true}</tt> в опциях, то валидация будет отложена до следующего изменения.
    </p>

    <p id="Model-escape">
      <b class="header">escape</b><code>model.escape(attribute)</code>
      <br />
      Этот метод похож на <a href="#Model-get">get</a>, но возвращает HTML-безопасную версию
      атрибута. Если вы вставляете данные из модели в HTML, использование <b>escape</b>
	    для получения атрибута предотвратит
      <a href="http://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%B6%D1%81%D0%B0%D0%B9%D1%82%D0%BE%D0%B2%D1%8B%D0%B9_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B8%D0%BD%D0%B3">XSS</a>-атаки.
    </p>

<pre class="runnable">
var hacker = new Backbone.Model({
  name: "&lt;script&gt;alert('xss')&lt;/script&gt;"
});

alert(hacker.escape('name'));
</pre>

    <p id="Model-has">
      <b class="header">has</b><code>model.has(attribute)</code>
      <br />
      Возвращает <tt>true</tt>, если атрибут установлен не в <tt>null</tt> и не в <tt>undefined</tt>.
    </p>

<pre>
if (note.has("title")) {
  ...
}
</pre>

    <p id="Model-unset">
      <b class="header">unset</b><code>model.unset(attribute, [options])</code>
      <br />
      Убирает атрибут, удаляя его из внутреннего хэша атрибутов.
      Запускает событие <tt>"change"</tt>, если не передать <tt>silent</tt> в опциях.
    </p>

    <p id="Model-clear">
      <b class="header">clear</b><code>model.clear([options])</code>
      <br />
      Убирает все атрибуты из модели. Запускает событие <tt>"change"</tt>, если не передать <tt>silent</tt> в опциях.
    </p>

    <p id="Model-id">
      <b class="header">id</b><code>model.id</code>
      <br />
      Специальное свойство модели <b>id</b> — произвольная строка (целый id или UUID).
	    Если вы указываете <b>id</b> в хэше атрибутов, он будет скопирован в свойство модели напрямую.
      Модели могут быть вытащены из коллекций по id, и id используется для генерации URL по умолчанию.
    </p>

    <p id="Model-idAttribute">
      <b class="header">idAttribute</b><code>model.idAttribute</code>
      <br />
      Уникальный идентификатор модели хранится в атрибуте <tt>id</tt>.
      Если ваше приложение напрямую коммуницирует с бэк-ендом (CouchDB, MongoDB), который использует
      другой уникальный ключ, вы можете указать <tt>idAttribute</tt>, чтобы прозрачно мапить этот ключ на <tt>id</tt>.

<pre class="runnable">
var Meal = Backbone.Model.extend({
  idAttribute: "_id"
});

var cake = new Meal({ _id: 1, name: "Cake" });
alert("Cake id: " + cake.id);
</pre>
    </p>

    <p id="Model-cid">
      <b class="header">cid</b><code>model.cid</code>
      <br />
      Специальное свойство моделей <b>cid</b> (от client id, клиентский id) — уникальный идентификатор,
      автоматически назначающийся всем моделям в момент инстанциирования. cid'ы удобны,
      когда модель еще не была сохранена на сервер, и не имеет своего настоящего <b>id</b>,
	    но уже должна быть видна в UI.
      Клиентские id'ы принимают вид: <tt>c1, c2, c3 ...</tt>
    </p>

    <p id="Model-attributes">
      <b class="header">attributes</b><code>model.attributes</code>
      <br />
      Свойство <b>attributes</b> — это внутренний хэш, содержащий состояние модели.
  	  Пожалуйста, используйте метод <a href="#Model-set">set</a> для обновления атрибутов
	    вместо прямого изменения этого хэша.
	    Если вам нужны атрибуты, который не жаль испортить, можно получить копию
	    с помощью метода<a href="#Model-toJSON">toJSON</a>.
    </p>

    <p id="Model-changed">
      <b class="header">changed</b><code>model.changed</code>
      <br />
      Свойство <b>changed</b> — это внутренний хэш, содержащий все атрибуты, которые были изменены
	    с тех пор, как последний раз срабатывало событие <tt>"change"</tt>.
      Пожалуйста, не обновляйте <b>changed</b> напрямую. Его состояние поддерживается внутри
      методами <a href="#Model-set">set</a> и <a href="#Model-change">change</a>.
      Копию <b>changed</b> можно получить через <a href="#Model-changedAttributes">changedAttributes</a>.
    </p>

    <p id="Model-defaults">
      <b class="header">defaults</b><code>model.defaults или model.defaults()</code>
      <br />
      Хэш (или функция ) <b>defaults</b> используется для указания значений атрибутов
	    по умолчанию. Во время инстанцирования модели все неуказанные атрибуты примут свое умолчательное значение.
    </p>

<pre class="runnable">
var Meal = Backbone.Model.extend({
  defaults: {
    "appetizer":  "Салат «Цезарь»",
    "entree":     "Равиоли",
    "dessert":    "Чиз-кейк"
  }
});

alert("На десерт: " + (new Meal).get('dessert'));
</pre>

    <p class="warning">
      Помните, что в JavaScript объекты передаются по ссылке —
	    так что, если какое-либо значение по умолчанию будет объектом,
	    оно будет одним для всех экземпляров.
	    <!-- Странное замечание. Зачем бы кому-то изменять умолчальные значения в модели пост-фактум? -->
    </p>

    <p id="Model-toJSON">
      <b class="header">toJSON</b><code>model.toJSON()</code>
      <br />
      Возвращает копию поля <a href="#Model-attributes">attributes</a> для превращения в JSON-строку.
      Метод может быть использован для персистентности, сериализации или для аугментации перед
	    передачей в представление.
	    Имя этого метода несколько сбивает с толку, так как он на самом деле не возвращает JSON-строку,
	    но именно так работает <a href="https://developer.mozilla.org/en/JSON#toJSON()_method">JavaScript API для <b>JSON.stringify</b></a>.
    </p>

<pre class="runnable">
var artist = new Backbone.Model({
  firstName: "Василий",
  lastName: "Кандинский"
});

artist.set({birthday: "December 16, 1866"});

alert(JSON.stringify(artist));
</pre>

    <p id="Model-fetch">
      <b class="header">fetch</b><code>model.fetch([options])</code>
      <br />
      Переустанавливает состояние модели с сервера с помощью
      <a href="#Sync">Backbone.sync</a>. Возвращает
      <a href="http://api.jquery.com/jQuery.ajax/#jqXHR">jqXHR</a>.
      Полезен, если модель никогда не наполнялась данными, или если вы хотите
      удостовериться, что вы имеете свежайшие данные с сервера. Событие <tt>"change"</tt>
	    сработает, если состояние сервера отличается от текущих атрибутов.
	    Принимает коллбэки <tt>success</tt> и <tt>error</tt> в хэше <b>options</b>,
	    в которые передаются <tt>(model, response)</tt> в качестве аргументов.
    </p>

<pre>
// Опрашивать каждые 10 секунд, чтобы хранить модель канала в актуальном состоянии.
setInterval(function() {
  channel.fetch();
}, 10000);
</pre>

    <p id="Model-save">
      <b class="header">save</b><code>model.save([attributes], [options])</code>
      <br />
      Сохраняет модель в БД (ли другой слой персистентности) при помощи <a href="#Sync">Backbone.sync</a>.
	    Возвращает <a href="http://api.jquery.com/jQuery.ajax/#jqXHR">jqXHR</a>, если валидация прошла успешно,
	    и <tt>false</tt> в противном случае. Хэш <b>attributes</b> (также, как в  <a href="#Model-set">set</a>),
  	  должен содержать атрибуты, которые вы хотите изменить — ключи, которые не были указаны, не будут изменены.
	    Однако, на сервер будет послано <i>полное представление</i> ресурса.
      Также, как и в <tt>set</tt>, можно передать отдельный ключ и значение вместо хэша.
      Если у модели определен метод <a href="#Model-validate">validate</a>, и валидация не проходит успешно,
	    модель не будет сохранена. Если флаг <a href="#Model-isNew">isNew</a> модели установлен в <tt>true</tt>,
	    сохранение будет действием <tt>"create"</tt>(HTTP-глагол <tt>POST</tt>); если модель уже существует на сервере,
	    сохранение будет действием <tt>"update"</tt> (HTTP-глагол <tt>PUT</tt>).
    </p>

    <p>
      Вызов <tt>save</tt> с новыми атрибутами немедленно вызовет срабатывание события <tt>"change"</tt>,
      и события <tt>"sync"</tt> — после того, как сервер известит об успешном изменении.
	    Передайте <tt>{wait: true}</tt>, если хотите подождать ответа сервера, прежде чем устанавливать
  	  новые значения атрибутов модели.
    </p>

    <p>
      Обратите внимание, как в следующем примере наша переопределенная версия <tt>Backbone.sync</tt>
	    получает запрос <tt>"create"</tt> в первый раз, когда сохраняется модель, и <tt>"update"</tt>
      во второй раз.
    </p>

<pre class="runnable">
Backbone.sync = function(method, model) {
  alert(method + ": " + JSON.stringify(model));
  model.id = 1;
};

var book = new Backbone.Model({
  title: "Малая Земля",
  author: "Леонид Брежнев"
});

book.save();

book.save({author: "Лёня"});
</pre>

    <p>
      <b>save</b> принимает коллбэки <tt>success</tt> и <tt>error</tt> в хэше <b>options</b>,
	    в которые передаются <tt>(model, response)</tt> в качестве аргументов.
      Коллбэк <tt>error</tt> также будет вызван, если у модели определен метод
      <tt>validate</tt>, и валидация проваливается. Если проваливается валидация на стороне сервера,
	    верните не <tt>2XX</tt> HTTP-статус, вместе с описанием ошибки в тексте или в JSON.
    </p>

<pre>
book.save("author", "У.К. Черненко", {error: function(){ ... }});
</pre>

    <p id="Model-destroy">
      <b class="header">destroy</b><code>model.destroy([options])</code>
      <br />
      Уничтожает модель на сервере с помощью HTTP-запроса <tt>DELETE</tt>
      через <a href="#Sync">Backbone.sync</a>. Возвращает объект
      <a href="http://api.jquery.com/jQuery.ajax/#jqXHR">jqXHR</a>, или
      <tt>false</tt>, если флаг <a href="#Model-isNew">isNew</a> истинен. Принимает коллбэки
      <tt>success</tt> и <tt>error</tt> в хэше <b>options</b>.
      Запускает событие <tt>"destroy"</tt> на модели, которое всплывет на всех коллекциях,
	    которые содержат её; и событие <tt>"sync"</tt> после того, как сервер известит об успешном удалении модели.
	    Передайте <tt>{wait: true}</tt>, если хотите подождать ответа сервера, прежде чем удалять модель.
    </p>

<pre>
book.destroy({success: function(model, response) {
  ...
}});
</pre>

    <p id="Model-validate">
      <b class="header">validate</b><code>model.validate(attributes)</code>
      <br />
      Этот метод оставлен неопределенным; поощряется переопределять его со своей логикой валидации — если у вас есть такая, которую можно выполнить на стороне клиента. Метод <b>validate</b> вызывается перед <tt>set</tt> и
      <tt>save</tt>, и ему передаются атрибуты модели, обновленные значениями из <tt>set</tt> ли <tt>save</tt>.
      Если атрибуты валидны, не возвращайте ничего из <b>validate</b>;
      если нет, возвращайте любую ошибку на ваш выбор — как просто
	    строку с сообщением, которое надо отобразить, так и сложный объект, программно описывающий ошибку.
  	  Если <b>validate</b> вернул ошибку, выполнение <tt>set</tt> или <tt>save</tt> прервется,
  	  и атрибуты модели не будут изменены.
      Проваленная валидация запустит событие <tt>"error"</tt>.
    </p>

<pre class="runnable">
var Chapter = Backbone.Model.extend({
  validate: function(attrs) {
    if (attrs.end < attrs.start) {
      return "Невозможно закончить до начала";
    }
  }
});

var one = new Chapter({
  title : "Глава I: Начало"
});

one.on("error", function(model, error) {
  alert(model.get("title") + " " + error);
});

one.set({
  start: 15,
  end:   10
});
</pre>

    <p>
      События <tt>"error"</tt> полезны для поверхностной обработки ошибок на уровне модели или коллекции,
	    но если у вас есть специфичное представление, которое может лучше обработать ошибку, вы можете подавить
	    событие, напрямую передав <tt>error</tt>коллбэк:
    </p>

<pre>
account.set({access: "unlimited"}, {
  error: function(model, error) {
    alert(error);
  }
});
</pre>

    <p id="Model-isValid">
      <b class="header">isValid</b><code>model.isValid()</code>
      <br />
      Модели могут войти в невалидное состояние, если делать изменения
	    с подавлением ошибок… что полезно в случае работы с формами ввода.
	    Вызовите <tt>model.isValid()</tt> чтобы проверить, находится ли
	    сейчас модель в валидном состоянии согласно вашему методу <tt>validate</tt>.
    </p>

    <p id="Model-url">
      <b class="header">url</b><code>model.url()</code>
      <br />
      Возвращает относительный URL, по которому ресурс модели должен располагаться
	    на сервере. Если ваши модели расположены в другом месте, переопределите этот метод
	    с правильной логикой. Генерирует URL'ы вида: <tt>"/[collection.url]/[id]"</tt>,
      с фоллбеком к <tt>"/[urlRoot]/id"</tt>, если модель не является частью коллекции.
    </p>

    <p>
      Обращается к <a href="#Collection-url">Collection#url</a>, чтобы сгенерировать URL,
	    так что удостоверьтесь, что он определен, или к свойству <a href="#Model-urlRoot">urlRoot</a> модели,
  	  если все модели этого класса разделают общий корневой URL.
      Модель с id равным <tt>101</tt>, хранящяяся в
      <a href="#Collection">коллекции</a> с <tt>url</tt> равным <tt>"/documents/7/notes"</tt>,
      будет иметь такой url: <tt>"/documents/7/notes/101"</tt>
    </p>

    <p id="Model-urlRoot">
      <b class="header">urlRoot</b><code>model.urlRoot или model.urlRoot()</code>
      <br />
      Укажите <tt>urlRoot</tt>, если вы используете модель вне коллекции,
      чтобы дефолтный метод <a href="#Model-url">url</a> генерировал
      URL'ы, исходя из id. <tt>"/[urlRoot]/id"</tt><br />
      Обратите внимание, что <tt>urlRoot</tt> так же может быть функцией.
    </p>

<pre class="runnable">
var Book = Backbone.Model.extend({urlRoot : '/books'});

var solaris = new Book({id: "1083-lem-solaris"});

alert(solaris.url());
</pre>

    <p id="Model-parse">
      <b class="header">parse</b><code>model.parse(response)</code>
      <br />
      Метод <b>parse</b> вызывается каждый раз, когда данные модели возвращаются
	    сервером, в методах <a href="#Model-fetch">fetch</a> и <a href="#Model-save">save</a>.
      Функции передается «сырой» объект <tt>response</tt>, и она должна возвратить
      хэш аттрибутов, который будет передан методу <a href="#Model-set">set</a>. Дефолтная
  	  реализация просто пробрасывает JSON-ответ.
      Переопределите этот метод, если вы работает с уже существующим API,
  	  или чтобы лучше заворачивать в пространства имен ответы сервера.
    </p>

    <p>
      Если вы работает с Rails, вы наткнетесь на то, что дефолтная реализация
      <tt>to_json</tt> отдает атрибуты модели в пространстве имен.
	    Чтобы устранить это поведение для лучшей интеграции Backbone, установите:
    </p>

<pre>
ActiveRecord::Base.include_root_in_json = false
</pre>

    <p id="Model-clone">
      <b class="header">clone</b><code>model.clone()</code>
      <br />
      Возвращает новый экземпляр модели с идентичными атрибутами.
    </p>

    <p id="Model-isNew">
      <b class="header">isNew</b><code>model.isNew()</code>
      <br />
      Была ли модель уже сохранена на сервер? Если модель еще не имеет атрибута
	  <tt>id</tt>, то она считается новой.
    </p>

    <p id="Model-change">
      <b class="header">change</b><code>model.change()</code>
      <br />
      Ручной запуск событий <tt>"change"</tt> и <tt>"change:attribute"</tt>
      для каждого измененного атрибута. Если вы передавали
      <tt>{silent: true}</tt> в <a href="#Model-set">set</a>, чтобы собрать быстрые изменения модели
  	  вам нужно вызвать <tt>model.change()</tt>, когда закончите.
    </p>

    <p id="Model-hasChanged">
      <b class="header">hasChanged</b><code>model.hasChanged([attribute])</code>
      <br />
      Была ли модель изменена с последнего события <tt>"change"</tt>? Если передан <b>attribute</b>,
      возвращает <tt>true</tt>, если этот атрибут был изменен.
    </p>

    <p class="warning">
      Обратите внимание, что этот метод, и следуюшие, касающиеся изменений, полезны только во время
  	  обработки события <tt>"change"</tt>.
    </p>

<pre>
book.on("change", function() {
  if (book.hasChanged("title")) {
    ...
  }
});
</pre>

    <p id="Model-changedAttributes">
      <b class="header">changedAttributes</b><code>model.changedAttributes([attributes])</code>
      <br />
      Возвращает хэш только тех атрибутов модели, которые были изменены.
  	  Опционально может быть передан внешний хэш атрибутов; в этом случае возвращаются
  	  те атрибуты из этого хэша, которые отличаются от таковых в модели.
  	  Может быть полезно для выяснения, какие части представения надо обновить,
	    или какие вызовы надо сделать, чтобы синхронизировать изменения с сервером.
    </p>

    <p id="Model-previous">
      <b class="header">previous</b><code>model.previous(attribute)</code>
      <br />
      Во время события <tt>"change"</tt>, этот метод позволяет получить предыдущее значение измененного атрибута.
    </p>

<pre class="runnable">
var bill = new Backbone.Model({
  name: "Иван Петров"
});

bill.on("change:name", function(model, name) {
  alert("Изменено имя с " + bill.previous("name") + " на " + name);
});

bill.set({name : "Иван Иванов"});
</pre>

    <p id="Model-previousAttributes">
      <b class="header">previousAttributes</b><code>model.previousAttributes()</code>
      <br />
      Возвращает копию предыдущих атрибутов модели. Полезно, чтобы получить
	    diff между версиями модели, или вернуться в валидное состояние после ошибки.
    </p>

    <h2 id="Collection">Backbone.Collection</h2>

    <p>
      Коллекции — это упорядоченные наборы моделей. Вы можете навесить обработчики — на событие <tt>"change"</tt>,
      чтобы получать оповещения, когда любая модель в коллекции изменяется;
      на события <tt>"add"</tt> и <tt>"remove"</tt>, на получение (<tt>fetch</tt>)
      коллекции с сервера, и использовать полный набор
      <a href="#Collection-Underscore-Methods">методов Underscore.js</a>.
    </p>

    <p>
      Любое событие, которое сработает на модели в коллекции также сработает и напрямую — для удобства — на коллекции.
      Это позволяет напрямую слушать события изменения отдельных атрибутов любой модели в коллекции. Например:
      <tt>Documents.on("change:selected", ...)</tt>
    </p>

    <p id="Collection-extend">
      <b class="header">extend</b><code>Backbone.Collection.extend(properties, [classProperties])</code>
      <br />
      Чтобы создать собственный класс коллекции, расширьте <b>Backbone.Collection</b>,
      предоставив свойства экземпляра в хэше <b>properties</b>, и опциональные свойства класса в <b>classProperties</b>,
      которые станут свойствами функции-конструктора.
    </p>

    <p id="Collection-model">
      <b class="header">model</b><code>collection.model</code>
      <br />
      Переопределите это свойство, чтобы указать класс моделей, которые содержит эта коллекция
      Если это свойство определено, можно передавать сырые хэши объектов (и массивы) в методы
      <a href="#Collection-add">add</a>, <a href="#Collection-create">create</a>,
      and <a href="#Collection-reset">reset</a>, и атрибуты будут сконвертированы в модели соответствующего типа.
    </p>

<pre>
var Library = Backbone.Collection.extend({
  model: Book
});
</pre>

    <p id="Collection-constructor">
      <b class="header">constructor / initialize</b><code>new Collection([models], [options])</code>
      <br />
      При создании экземпляра коллекции можно передать начальный массив моделей (в параметре <b>models</b>).
      В <b>options</b> может быть передана функция <a href="#Collection-comparator">функция-компаратор</a>.
      Метод <b>initialize</b> вызывается после создания экземпляра коллекции.
    </p>

<pre>
var tabs = new TabSet([tab1, tab2, tab3]);
</pre>

    <p id="Collection-models">
      <b class="header">models</b><code>collection.models</code>
      <br />
      Прямой доступ к массиву моделей коллекции. Обычно используются методы
      <tt>get</tt>, <tt>at</tt>, или <b>методы Underscore</b>, чтобы получить модели,
      но порой необходима прямая ссылка на массив.
    </p>

    <p id="Collection-toJSON">
      <b class="header">toJSON</b><code>collection.toJSON()</code>
      <br />
      Возвращает массив, содержащий хэш атрибутов каждой модели в коллекции.
      Используется в сериализации и сохранении коллекции целиком.
      Название несколько сбивает с толку потому, что соответствует
      <a href="https://developer.mozilla.org/en/JSON#toJSON()_method">JSON API</a>.
    </p>

<pre class="runnable">
var collection = new Backbone.Collection([
  {name: "Tim", age: 5},
  {name: "Ida", age: 26},
  {name: "Rob", age: 55}
]);

alert(JSON.stringify(collection));
</pre>

    <p id="Collection-Underscore-Methods">
      <b class="header">Методы Underscore (28)</b>
      <br />
      Backbone проксирует <b>Underscore.js</b>, чтобы предоставить доступ к 28 функциям, итерирующим по <b>Backbone.Collection</b>.
      Они не все документированы здесь, но можно смотреть на документацию самого Underscore.
    </p>

    <ul class="small">
      <li><a href="http://documentcloud.github.com/underscore/#each">forEach (each)</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#map">map</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#reduce">reduce (foldl, inject)</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#reduceRight">reduceRight (foldr)</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#detect">find (detect)</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#select">filter (select)</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#reject">reject</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#all">every (all)</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#any">some (any)</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#include">include</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#invoke">invoke</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#max">max</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#min">min</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#sortBy">sortBy</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#groupBy">groupBy</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#sortedIndex">sortedIndex</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#shuffle">shuffle</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#toArray">toArray</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#size">size</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#first">first</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#initial">initial</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#rest">rest</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#last">last</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#without">without</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#indexOf">indexOf</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#lastIndexOf">lastIndexOf</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#isEmpty">isEmpty</a></li>
      <li><a href="http://documentcloud.github.com/underscore/#chain">chain</a></li>
    </ul>

<pre>
Books.each(function(book) {
  book.publish();
});

var titles = Books.map(function(book) {
  return book.get("title");
});

var publishedBooks = Books.filter(function(book) {
  return book.get("published") === true;
});

var alphabetical = Books.sortBy(function(book) {
  return book.author.get("name").toLowerCase();
});
</pre>

    <p id="Collection-add">
      <b class="header">add</b><code>collection.add(models, [options])</code>
      <br />
      Добавляет модель (или массив моделей) в коллекцию. Запускает событие <tt>"add"</tt>
      в которое вы можете передать <tt>{silent: true}</tt> чтобы его подавить. Если
      свойство <a href="#Collection-model">model</a> определено, можно передавать сырые атрибуты,
      и они будут оживлены в инстансы моделей.
      Чтобы вставить модель по специфичному индексу, передайте <tt>{at: index}</tt>.
      Таким же образом, если у вас есть слушатель на событие <tt>"add"</tt>,
      в него будет передан индекс, куда была вставлена модель — в параметре <tt>options.index</tt>.
    </p>

<pre class="runnable">
var ships = new Backbone.Collection;

ships.on("add", function(ship) {
  alert("«"ship.get("name") + "» прямо по курсу!");
});

ships.add([
  {name: "Летучий Голландец"},
  {name: "Черная жемчужина"}
]);
</pre>

    <p id="Collection-remove">
      <b class="header">remove</b><code>collection.remove(models, [options])</code>
      <br />
      Удаляет модель (или массив моделей) из коллекции. Запускает событие <tt>"remove"</tt>
      которое вы можете подавить наличием ключа <tt>silent</tt> в хэше <b>options</b>.
      Если есть слушатель события <tt>"remove"</tt>, то индекс удаляемой модели
      доступен в <tt>options.index</tt>.
    </p>

    <p id="Collection-get">
      <b class="header">get</b><code>collection.get(id)</code>
      <br />
      Возвращает модель из коллекции по ее <b>id</b>.
    </p>

<pre>
var book = Library.get(110);
</pre>

    <p id="Collection-getByCid">
      <b class="header">getByCid</b><code>collection.getByCid(cid)</code>
      <br />
      Возвращает модель из коллекции по указанному клиентскому id (свойство <tt>.cid</tt>).
      Это свойство модели автоматически назначается ей при создании. Находит применение для моделей,
      которые еще не были сохранены на сервер и еще не имеют настоящего <tt>id</tt>.
    </p>

    <p id="Collection-at">
      <b class="header">at</b><code>collection.at(index)</code>
      <br />
      Возвращает модель из коллекции по индексу. Полезно, если ваша коллекция отсортирована;
      если нет, то этот метод возвращает модели по порядку вставки.
    </p>

    <p id="Collection-push">
      <b class="header">push</b><code>collection.push(model, [options])</code>
      <br />
      Добавляет модель в конец коллекции. Принимает те же аргументы,
      что и <a href="#Collection-add">add</a>.
    </p>

    <p id="Collection-pop">
      <b class="header">pop</b><code>collection.pop([options])</code>
      <br />
      Удаляет последнюю модель из коллекции и возвращает ее. Принимает те же аргументы,
      что и <a href="#Collection-remove">remove</a>.
    </p>

    <p id="Collection-unshift">
      <b class="header">unshift</b><code>collection.unshift(model, [options])</code>
      <br />
      Добавляет модель в начало коллекции.
      Add a model at the beginning of a collection. Принимает те же аргументы,
      что и <a href="#Collection-add">add</a>.
    </p>

    <p id="Collection-shift">
      <b class="header">shift</b><code>collection.shift([options])</code>
      <br />
      Удаляет первую модель из коллекции и возвращает ее. Принимает те же аргументы,
      что и <a href="#Collection-remove">remove</a>.
    </p>

    <p id="Collection-length">
      <b class="header">length</b><code>collection.length</code>
      <br />
      Подобно массивам, коллекции поддерживают свойство <tt>length</tt>,
      равное количеству моделей, которые она содержит.
    </p>

    <p id="Collection-comparator">
      <b class="header">comparator</b><code>collection.comparator</code>
      <br />
      По умолчанию коллекции не определяют функцию-компаратор.
      Если вы определяет компаратор, он будет использован, чтобы поддерживать
      коллекцию в отсортированном виде. Это означает, что когда модели добавляются,
      они вставляются по корректному индексу в <tt>collection.models</tt>.
      <tt>comparator</tt> может быть определен либо как функция, подходящяя для
      <a href="http://underscorejs.org/#sortBy">sortBy из Underscore</a>
      (функция одного аргумента),
      либо как функция, подходящяя для
      <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort">Array.sort</a>
      (функция двух аргументов).
    </p>

    <p>
      Компараторы типа "sortBy" принимают модель и возвращают численное или строковое
      значение, по которому модель должна быть отсортирована относительно других.
      Компараторы типа "sort" принимают две модели, и должны возвращать: <tt>-1</tt>, если
      перва модель должна идти перед второй; <tt>0</tt>, если у них одинаковая позиция;
      и <tt>1</tt>, если перая модель должна идти после второй.
    </p>

    <p>
      Отметьте, что хотя главы в данном примере добавляются в обратном порядке,
      в коллекции они расположены в верном порядке:
    </p>

<pre class="runnable">
var Chapter  = Backbone.Model;
var chapters = new Backbone.Collection;

chapters.comparator = function(chapter) {
  return chapter.get("page");
};

chapters.add(new Chapter({page: 9, title: "Конец"}));
chapters.add(new Chapter({page: 5, title: "Середина"}));
chapters.add(new Chapter({page: 1, title: "Начало"}));

alert(chapters.pluck('title'));
</pre>

    <p class="warning">
      Коллекции с компаратором не будут автоматически пересортировываться, если
      вы измените атрибуты моделей, которые влияют на сортировку. В этом случае следует
      вызвать <tt>sort</tt> вручную.
    </p>

    <p id="Collection-sort">
      <b class="header">sort</b><code>collection.sort([options])</code>
      <br />
      Заставляет модель выполнить пересортировку. Обычно нет необходимости вызывать этот метод вручную,
      так как коллекции с <a href="#Collection-comparator">компаратором</a> всегда сами будут поддерживать себя в
      отсортированном виде.
      Вызов <b>sort</b> запускает на коллекции событие <tt>"reset"</tt> если не подавить его с помощью <tt>{silent: true}</tt>
    </p>

    <p id="Collection-pluck">
      <b class="header">pluck</b><code>collection.pluck(attribute)</code>
      <br />
      Собирает значения атрибута из каждой модели в коллекции. Эквивалентно вызову
      <tt>map</tt> с возвратом одного атрибута из итератора.
    </p>

<pre class="runnable">
var stooges = new Backbone.Collection([
  {name: "Curly"},
  {name: "Larry"},
  {name: "Moe"}
]);

var names = stooges.pluck("name");

alert(JSON.stringify(names));
</pre>

    <p id="Collection-where">
      <b class="header">where</b><code>collection.where(attributes)</code>
      <br />
      Возвращает массив всех моделей, подходящих под переданный хэш <b>attributes</b>.
      Полезно для простых случаев фильтрации.
    </p>

<pre class="runnable">
var friends = new Backbone.Collection([
  {name: "Атос",       job: "Мушкетер"},
  {name: "Портос",     job: "Мушкетер"},
  {name: "Арамис",     job: "Мушкетер"},
  {name: "д'Артаньян", job: "Гвардеец короля"},
]);

var musketeers = friends.where({job: "Мушкетер"});

alert(musketeers.length);
</pre>

    <p id="Collection-url">
      <b class="header">url</b><code>collection.url or collection.url()</code>
      <br />
      Свойство (или функция) <b>url</b> предназначена для того чтобы указывать положение
      коллекции на сервере. Модели в коллекциях с определенным <b>url</b>
      будут использовать его, чтобы конструировать свои собственные URL'ы.
    </p>

<pre>
var Notes = Backbone.Collection.extend({
  url: '/notes'
});

// Или чуть сложнее:

var Notes = Backbone.Collection.extend({
  url: function() {
    return this.document.url() + '/notes';
  }
});
</pre>

    <p id="Collection-parse">
      <b class="header">parse</b><code>collection.parse(response)</code>
      <br />
      <b>parse</b> вызывается каждый раз, когда модели коллекции
      приходят с сервера, в методе <a href="#Collection-fetch">fetch</a>.
      Функции принимает сырой объект <tt>response</tt>, и должна вернуть
      массив атрибутов моделей, которые будут добавлены в коллекцию
      методом <a href="#Collection-add">add</a>. Дефолтная
      реализация просто пробрасывает JSON-ответ.
      Переопределите этот метод, если вы работает с уже существующим API,
      или чтобы лучше заворачивать в пространства имен ответы сервера.
      Следует отметить, что после этого, если у модели тоже есть метод <tt>parse</tt>,
      он будет вызван на каждой полученной модели.
    </p>

<pre>
var Tweets = Backbone.Collection.extend({
  // API поиска Twitter возвращает твиты в поле "results".
  parse: function(response) {
    return response.results;
  }
});
</pre>

    <p id="Collection-fetch">
      <b class="header">fetch</b><code>collection.fetch([options])</code>
      <br />
      Получает дефолтный набор моделей для этой коллекции с сервера,
      вызывая по их прибытии <tt>reset</tt>. В хэш <b>options</b> могут быть коллбеки
      <tt>success</tt> и <tt>error</tt>, которым передаются коллекция и ответ сервера
      <tt>(collection, response)</tt> в качестве аргументов.
      Когда данные моделей придут с сервера, коллекция вызовет метод
      <a href="#Collection-reset">reset</a>.
      Внутри <tt>fetch</tt> обращается к <a href="#Sync">Backbone.sync</a>
      чтобы можно было создать свою стратегию персистентности, и возвращает
      <a href="http://api.jquery.com/jQuery.ajax/#jqXHR">jqXHR</a>-объект.
      Серверный обрабтчик запросов <b>fetch</b> должен возвращать JSON-массив моделей.
    </p>

<pre class="runnable">
Backbone.sync = function(method, model) {
  alert(method + ": " + model.url);
};

var Accounts = new Backbone.Collection;
Accounts.url = '/accounts';

Accounts.fetch();
</pre>

    <p>
      Можно добавить пришедшие модели в коллекцию, вместо замены, передав
      <tt>{add: true}</tt> в хэше <tt>options</tt>.
    </p>

    <p>
      Опции <b>jQuery.ajax</b> также могут быть напрямую переданы в <b>fetch</b>,
      чтобы, например, получить определенную страницу пагинированной коллекции:
      <tt>Documents.fetch({data: {page: 3}})</tt>
    </p>

    <p>
      Заметьте, что <b>fetch</b> не должен использоваться, чтобы наполнять коллекции на этапе
      загрузки страницы — все модели, необходимые во время загрузки должны быть
      <a href="#FAQ-bootstrap">предзагружены</a>. <b>fetch</b> предназначен
      для «ленивой» загрузки моделей для интерфейсов, которые не нужны
      немедленно: например, документы с коллекциями заметок, которые могут быть открыты или закрыты.
    </p>

    <p id="Collection-reset">
      <b class="header">reset</b><code>collection.reset(models, [options])</code>
      <br />
      Добавлять и удалять модели по одной — хорошо и правильно, но иногда
      надо изменить столько моделей, что проще обновить коллекцию целиком.
      Используйте <b>reset</b>, чтобы заменить коллекцию новым списком моделей
      (или хэшей атрибутов). При этом сработает одно событие <tt>"reset"</tt>
      в конце. Передайте <tt>{silent: true}</tt>, чтобы подавить его.
      Вызов <b>reset</b> без аргументов — удобный способ опустошить коллекцию.
    </p>

    <p>
      Вот пример использования <b>reset</b> для предзагрузки коллекции в приложении на Rails:
    </p>

<pre>
&lt;script&gt;
  var Accounts = new Backbone.Collection;
  Accounts.reset(&lt;%= @accounts.to_json %&gt;);
&lt;/script&gt;
</pre>

    <p>
      Вызов <tt>collection.reset()</tt> без передачи каких-либо моделей сделает коллекцию пустой.
    </p>

    <p id="Collection-create">
      <b class="header">create</b><code>collection.create(attributes, [options])</code>
      <br />
      Удобное создание модели внутри коллекции.
      Эквивалентно созданию экземпляра модели с хэшом <b>attributes</b>,
      сохранению модели на сервер, и добавлению модели в набор после успешного создания.
      Возвращает модель или <tt>false</tt>, если ошибка валидации не позволила
      модели создасться.
      Чтобы это корректно работало, у коллекции должно быть свойство <a href="#Collection-model">model</a>.
      Метод <b>create</b> может принимать либо хэш атрибутов, либо существующую несохраненную модель.
      existing, unsaved model object.
    </p>

    <p>
      Создание модели немедленно и автоматически запускает событие <tt>"add"</tt>,
      и событие <tt>"sync"</tt>, как только модель успешно создастся на сервере.
      Передайте <tt>{wait: true}</tt>, если вы хотите подождать ответа сервера перед добавлением.
    </p>

<pre>
var Library = Backbone.Collection.extend({
  model: Book
});

var NYPL = new Library;

var othello = NYPL.create({
  title: "Отелло",
  author: "Вильям Шекспир"
});
</pre>

    <h2 id="Router">Backbone.Router</h2>

    <p>
      Web applications often provide linkable, bookmarkable, shareable URLs for
      important locations in the app. Until recently, hash fragments
      (<tt>#page</tt>) were used to provide these permalinks, but with the
      arrival of the History API, it's now possible to use standard URLs (<tt>/page</tt>).
      <b>Backbone.Router</b> provides methods for routing client-side pages, and
      connecting them to actions and events. For browsers which don't yet support
      the History API, the Router handles graceful fallback and transparent
      translation to the fragment version of the URL.
    </p>

    <p>
      During page load, after your application has finished creating all of its routers,
      be sure to call <tt>Backbone.history.start()</tt>, or
      <tt>Backbone.history.start({pushState: true})</tt> to route the initial URL.
    </p>

    <p id="Router-extend">
      <b class="header">extend</b><code>Backbone.Router.extend(properties, [classProperties])</code>
      <br />
      Get started by creating a custom router class. Define actions that are
      triggered when certain URL fragments are
      matched, and provide a <a href="#Router-routes">routes</a> hash
      that pairs routes to actions. Note that you'll want to avoid using a
      leading slash in your route definitions:
    </p>

<pre>
var Workspace = Backbone.Router.extend({

  routes: {
    "help":                 "help",    // #help
    "search/:query":        "search",  // #search/kiwis
    "search/:query/p:page": "search"   // #search/kiwis/p7
  },

  help: function() {
    ...
  },

  search: function(query, page) {
    ...
  }

});
</pre>

    <p id="Router-routes">
      <b class="header">routes</b><code>router.routes</code>
      <br />
      The routes hash maps URLs with parameters to functions on your router,
      similar to the <a href="#View">View</a>'s <a href="#View-delegateEvents">events hash</a>.
      Routes can contain parameter parts, <tt>:param</tt>, which match a single URL
      component between slashes; and splat parts <tt>*splat</tt>, which can match
      any number of URL components.
    </p>

    <p>
      For example, a route of <tt>"search/:query/p:page"</tt> will match
      a fragment of <tt>#search/obama/p2</tt>, passing <tt>"obama"</tt>
      and <tt>"2"</tt> to the action. A route of <tt>"file/*path"</tt> will
      match <tt>#file/nested/folder/file.txt</tt>,
      passing <tt>"nested/folder/file.txt"</tt> to the action.
    </p>

    <p>
      When the visitor presses the back button, or enters a URL, and a particular
      route is matched, the name of the action will be fired as an
      <a href="#Events">event</a>, so that other objects can listen to the router,
      and be notified. In the following example, visiting <tt>#help/uploading</tt>
      will fire a <tt>route:help</tt> event from the router.
    </p>

<pre>
routes: {
  "help/:page":         "help",
  "download/*path":     "download",
  "folder/:name":       "openFolder",
  "folder/:name-:mode": "openFolder"
}
</pre>

<pre>
router.on("route:help", function(page) {
  ...
});
</pre>

    <p id="Router-constructor">
      <b class="header">constructor / initialize</b><code>new Router([options])</code>
      <br />
      When creating a new router, you may pass its
      <a href="#Router-routes">routes</a> hash directly as an option, if you
      choose. All <tt>options</tt> will also be passed to your <tt>initialize</tt>
      function, if defined.
    </p>

    <p id="Router-route">
      <b class="header">route</b><code>router.route(route, name, [callback])</code>
      <br />
      Manually create a route for the router, The <tt>route</tt> argument may
      be a <a href="#Router-routes">routing string</a> or regular expression.
      Each matching capture from the route or regular expression will be passed as
      an argument to the callback. The <tt>name</tt> argument will be triggered as
      a <tt>"route:name"</tt> event whenever the route is matched.  If the
      <tt>callback</tt> argument is omitted <tt>router[name]</tt> will be used
      instead.
    </p>

<pre>
initialize: function(options) {

  // Matches #page/10, passing "10"
  this.route("page/:number", "page", function(number){ ... });

  // Matches /117-a/b/c/open, passing "117-a/b/c" to this.open
  this.route(/^(.*?)\/open$/, "open");

},

open: function(id) { ... }
</pre>

    <p id="Router-navigate">
      <b class="header">navigate</b><code>router.navigate(fragment, [options])</code>
      <br />
      Whenever you reach a point in your application that you'd like to save
      as a URL, call <b>navigate</b> in order to update the URL.
      If you wish to also call the route function, set the <b>trigger</b>
      option to <tt>true</tt>.
      To update the URL without creating an entry in the browser's history,
      set the <b>replace</b> option to <tt>true</tt>.
    </p>

<pre>
openPage: function(pageNumber) {
  this.document.pages.at(pageNumber).open();
  this.navigate("page/" + pageNumber);
}

# Or ...

app.navigate("help/troubleshooting", {trigger: true});

# Or ...

app.navigate("help/troubleshooting", {trigger: true, replace: true});
</pre>

    <h2 id="History">Backbone.history</h2>

    <p>
      <b>History</b> serves as a global router (per frame) to handle <tt>hashchange</tt>
      events or <tt>pushState</tt>, match the appropriate route, and trigger callbacks. You shouldn't
      ever have to create one of these yourself &mdash; you should use the reference
      to <tt>Backbone.history</tt> that will be created for you automatically if you make use
      of <a href="#Router">Routers</a> with <a href="#Router-routes">routes</a>.
    </p>

    <p>
      <b>pushState</b> support exists on a purely opt-in basis in Backbone.
      Older browsers that don't support <tt>pushState</tt> will continue to use
      hash-based URL fragments, and if a hash URL is visited by a
      <tt>pushState</tt>-capable browser, it will be transparently upgraded to
      the true URL. Note that using real URLs requires your web server to be
      able to correctly render those pages, so back-end changes are required
      as well. For example, if you have a route of <tt>/documents/100</tt>,
      your web server must be able to serve that page, if the browser
      visits that URL directly. For full search-engine crawlability, it's best to
      have the server generate the complete HTML for the page ... but if it's a web
      application, just rendering the same content you would have for the root URL,
      and filling in the rest with Backbone Views and JavaScript works fine.
    </p>

    <p id="History-start">
      <b class="header">start</b><code>Backbone.history.start([options])</code>
      <br />
      When all of your <a href="#Router">Routers</a> have been created,
      and all of the routes are set up properly, call <tt>Backbone.history.start()</tt>
      to begin monitoring <tt>hashchange</tt> events, and dispatching routes.
    </p>

    <p>
      To indicate that you'd like to use HTML5 <tt>pushState</tt> support in
      your application, use <tt>Backbone.history.start({pushState: true})</tt>.
    </p>

    <p>
      If your application is not being served from the root url <tt>/</tt> of your
      domain, be sure to tell History where the root really is, as an option:
      <tt>Backbone.history.start({pushState: true, root: "/public/search/"})</tt>
    </p>

    <p>
      When called, if a route succeeds with a match for the current URL,
      <tt>Backbone.history.start()</tt> returns <tt>true</tt>. If no defined
      route matches the current URL, it returns <tt>false</tt>.
    </p>

    <p>
      If the server has already rendered the entire page, and you don't want the
      initial route to trigger when starting History, pass <tt>silent: true</tt>.
    </p>

    <p>
      Because hash-based history in Internet Explorer relies on an
      <tt>&lt;iframe&gt;</tt>, be sure to only call <tt>start()</tt> after the DOM
      is ready.
    </p>

<pre>
$(function(){
  new WorkspaceRouter();
  new HelpPaneRouter();
  Backbone.history.start({pushState: true});
});
</pre>

    <h2 id="Sync">Backbone.sync</h2>

    <p>
      <b>Backbone.sync</b> is the function that Backbone calls every time it
      attempts to read or save a model to the server. By default, it uses
      <tt>(jQuery/Zepto).ajax</tt> to make a RESTful JSON request and returns a
      <a href="http://api.jquery.com/jQuery.ajax/#jqXHR">jqXHR</a>. You can override
      it in order to use a different persistence strategy, such as WebSockets,
      XML transport, or Local Storage.
    </p>

    <p>
      The method signature of <b>Backbone.sync</b> is <tt>sync(method, model, [options])</tt>
    </p>

    <ul>
      <li><b>method</b> – the CRUD method (<tt>"create"</tt>, <tt>"read"</tt>, <tt>"update"</tt>, or <tt>"delete"</tt>)</li>
      <li><b>model</b> – the model to be saved (or collection to be read)</li>
      <li><b>options</b> – success and error callbacks, and all other jQuery request options</li>
    </ul>

    <p>
      With the default implementation, when <b>Backbone.sync</b> sends up a request to save
      a model, its attributes will be passed, serialized as JSON, and sent in the HTTP body
      with content-type <tt>application/json</tt>. When returning a JSON response,
      send down the attributes of the  model that have been changed by the server, and need
      to be updated on the client. When responding to a <tt>"read"</tt> request from a collection
      (<a href="#Collection#fetch">Collection#fetch</a>), send down an array
      of model attribute objects.
    </p>

    <p>
      The <b>sync</b> function may be overriden globally as <tt>Backbone.sync</tt>,
      or at a finer-grained level, by adding a <tt>sync</tt> function to a Backbone
      collection or to an individual model.
    </p>

    <p>
      The default <b>sync</b> handler maps CRUD to REST like so:
    </p>

    <ul>
      <li><b>create &rarr; POST &nbsp; </b><tt>/collection</tt></li>
      <li><b>read &rarr; GET &nbsp; </b><tt>/collection[/id]</tt></li>
      <li><b>update &rarr; PUT &nbsp; </b><tt>/collection/id</tt></li>
      <li><b>delete &rarr; DELETE &nbsp; </b><tt>/collection/id</tt></li>
    </ul>

    <p>
      As an example, a Rails handler responding to an <tt>"update"</tt> call from
      <tt>Backbone</tt> might look like this: <i>(In real code, never use
      </i><tt>update_attributes</tt><i> blindly, and always whitelist the attributes
      you allow to be changed.)</i>
    </p>

<pre>
def update
  account = Account.find params[:id]
  account.update_attributes params
  render :json => account
end
</pre>

    <p>
      One more tip for Rails integration is to disable the default namespacing for
      <tt>to_json</tt> calls on models by setting <tt>ActiveRecord::Base.include_root_in_json = false</tt>
    </p>

    <p id="Sync-emulateHTTP">
      <b class="header">emulateHTTP</b><code>Backbone.emulateHTTP = true</code>
      <br />
      If you want to work with a legacy web server that doesn't support Backbones's
      default REST/HTTP approach, you may choose to turn on <tt>Backbone.emulateHTTP</tt>.
      Setting this option will fake <tt>PUT</tt> and <tt>DELETE</tt> requests with
      a HTTP <tt>POST</tt>, setting the <tt>X-HTTP-Method-Override</tt> header
      with the true method. If <tt>emulateJSON</tt> is also on, the true method
      will be passed as an additional <tt>_method</tt> parameter.
    </p>

<pre>
Backbone.emulateHTTP = true;

model.save();  // POST to "/collection/id", with "_method=PUT" + header.
</pre>

    <p id="Sync-emulateJSON">
      <b class="header">emulateJSON</b><code>Backbone.emulateJSON = true</code>
      <br />
      If you're working with a legacy web server that can't handle requests
      encoded as <tt>application/json</tt>, setting <tt>Backbone.emulateJSON = true;</tt>
      will cause the JSON to be serialized under a <tt>model</tt> parameter, and
      the request to be made with a <tt>application/x-www-form-urlencoded</tt>
      mime type, as if from an HTML form.
    </p>

    <h2 id="View">Backbone.View</h2>

    <p>
      Виды в Backbone — это скорее соглашение, нежели код: они никак не влияют
      на ваш HTML и CSS, и могут быть использованы с любой шаблонной библиотекой.
      Основная идея — организивать ваш интерфейс в логически выделенные виды,
      опирающиеся на модели, каждая из которых может быть обновлена независимо, когда
      модель изменяется, без необходимости перерисовать страницу. Вместо того, чтобы копаться
      в JSON-объекте, выискивать элемент в DOM-дереве, и обновлять HTML вручную,
      вы привязывате метод <tt>render</tt> вашего вида к событию <tt>"change"</tt> модели —
      и теперь везде, где бы ни отображались данные модели, они немедленно становятся актуальными.
    </p>

    <p id="View-extend">
      <b class="header">extend</b><code>Backbone.View.extend(properties, [classProperties])</code>
      <br />
      Создания своего класса вида. Нужно переопределить метод <a href="#View-render">render</a>
      декларативно указать свои <a href="#View-delegateEvents">события</a>, и, возможно,
      <tt>tagName</tt>, <tt>className</tt>, или <tt>id</tt> корневого элемента вашего представления.
    </p>

<pre>
var DocumentRow = Backbone.View.extend({

  tagName: "li",

  className: "document-row",

  events: {
    "click .icon":          "open",
    "click .button.edit":   "openEditDialog",
    "click .button.delete": "destroy"
  },

  render: function() {
    ...
  }

});
</pre>

    <p id="View-constructor">
      <b class="header">constructor / initialize</b><code>new View([options])</code>
      <br />
      При создании экземпляра представления, опции которые вы передаете в хэше <b>options</b>
      будут доступны как <tt>this.options</tt> внутри представления. Есть несколько особенных опций,
      которые, будучи переданы, будут доступны напрямую:
      <tt>model</tt>, <tt>collection</tt>,
      <tt>el</tt>, <tt>id</tt>, <tt>className</tt>, <tt>tagName</tt> и <tt>attributes</tt>.
      Если представление определяет метод <b>initialize</b>, он будет вызван 
      в момент создания экземпляра. Если вы хотите создать представление, которое
      ссылается на элемент, <i>уже присутствующий</i> в DOM, передайте его в опциях:
      <tt>new View({el: existingElement})</tt>. В дальнейшем он так же будет доступен как <tt>this.el</tt>
    </p>

<pre>
var doc = Documents.first();

new DocumentRow({
  model: doc,
  id: "document-row-" + doc.id
});
</pre>

    <p id="View-el">
      <b class="header">el</b><code>view.el</code>
      <br />
      Все представления всегда имеют DOM-элемент в любой момент времени, (свойство <b>el</b>),
      вставлены они в документ или нет. Таким образом представления могут быть отрендерены в любое время,
      и вставлены в DOM-дерево все разом — это приводит к высокопроизводительному интерфейсу
      с как можно меньшим количеством переформатирований и перерисовываний (reflows and repaints)
      <tt>this.el</tt> создается из свойств <tt>tagName</tt>, <tt>className</tt>, <tt>id</tt> и <tt>attributes</tt>,
      если они указаны. Если нет — <b>el</b> будет пустым <tt>div</tt>'ом.
    </p>

<pre class="runnable">
var ItemView = Backbone.View.extend({
  tagName: 'li'
});

var BodyView = Backbone.View.extend({
  el: 'body'
});

var item = new ItemView();
var body = new BodyView();

alert(item.el + ' ' + body.el);
</pre>

    <p id="View-$el">
      <b class="header">$el</b><code>view.$el</code>
      <br />
      Закешированный объект jQuery (или Zepto) c элементом данного представления — то же самое, что <tt>$(this.el)</tt>. 
      Удобная ссылка — замена постоянному оборачиванию DOM-элемента.
    </p>

<pre>
view.$el.show();

listView.$el.append(itemView.el);
</pre>

    <p id="View-setElement">
      <b class="header">setElement</b><code>view.setElement(element)</code>
      <br />
      Если вы хотите применить Backbone-представление к другому DOM-элементу, используйте
      <b>setElement</b>, который также создаст закешированную ссылку <tt>$el</tt>
      и перенесет делегированные события со старого элемента на новый.
    </p>

    <p id="View-attributes">
      <b class="header">attributes</b><code>view.attributes</code>
      <br />
      Хэш атрибутов, которые будут установлены DOM-элементу <tt>el</tt> (id, класс, data-атрибуты, и т.д.),
      или функция, которая возвращает такой хэш.
    </p>

    <p id="View-dollar">
      <b class="header">$ (jQuery or Zepto)</b><code>view.$(selector)</code>
      <br />
      Если jQuery или Zepto подключены на странице, каждое представление имеет
      функцию <b>$</b>, которая выполняет DOM-запросы внутри элемента представления.
      Используя эту функцию, вы не нуждаетесь в использовании id модели как части вашего запроса чтобы 
      получить определенные элементы в списке, и можете больше полагаться на HTML-класс.
      Это эквавлентно такому вызову: <tt>view.$el.find(selector)</tt>
    </p>

<pre>
ui.Chapter = Backbone.View.extend({
  serialize : function() {
    return {
      title: this.$(".title").text(),
      start: this.$(".start-page").text(),
      end:   this.$(".end-page").text()
    };
  }
});
</pre>

    <p id="View-render">
      <b class="header">render</b><code>view.render()</code>
      <br />
      Дефолтная реализация метода <b>render</b> — пустая функция. Переопределите её
      своим кодом отрисовки шаблона с данными модели и обновления <tt>this.el</tt> новым HTML.
      Хорошее соглашение — делать <tt>return this</tt> в конце <b>render</b>, чтобы иметь возможность
      чейнить вызовы.
    </p>

<pre>
var Bookmark = Backbone.View.extend({
  render: function() {
    $(this.el).html(this.template(this.model.toJSON()));
    return this;
  }
});
</pre>

    <p>
      Backbone ничего не знает о ваших предпочтениях создания HTML.
      Ваш метод <b>render</b> может просто слепливать HTML-строку, или использовать
      <tt>document.createElement</tt>, чтобы генерировать DOM-дерево. Как бы то ни было, мы предлагаем
      выбрать хорошую шаблонную библиотеку.
      <a href="http://github.com/janl/mustache.js">Mustache.js</a>,
      <a href="http://github.com/creationix/haml-js">Haml-js</a>, и
      <a href="http://github.com/sstephenson/eco">Eco</a> являются хорошими альтернативами.
      Так как на странице уже присутствует <a href="http://documentcloud.github.com/underscore/">Underscore.js</a>,
      доступна функция <a href="http://documentcloud.github.com/underscore/#template">_.template</a>
      и является превосходным выбором, если вы уже санитировали свои данные от XSS.
    </p>

    <p>
      На какой бы стратегии шаблонизации вы бы не остановились, она хороша, если вы <i>никогда</i>
      не помещаете строки с HTML в ваш JavaScript. В DocumentCloud мы используем
      <a href="http://documentcloud.github.com/jammit/">Jammit</a> чтобы упаковать 
      наши JS-шаблоны, хранящиеся в <tt>/app/views</tt>, как часть нашего
      главного пакета ассетов, в <tt>core.js</tt>.
    </p>

    <p id="View-remove">
      <b class="header">remove</b><code>view.remove()</code>
      <br />
      Удобная функция для удаления элемента представления из DOM. Эквивалентно вызову
      <tt>$(view.el).remove();</tt>
    </p>

    <p id="View-make">
      <b class="header">make</b><code>view.make(tagName, [attributes], [content])</code>
      <br />
      Удобная функция для создания DOM-элемента данного типа (<b>tagName</b>),
      с опциональными атрибутами и HTML-содержимым content. Используется «под капотом»,
      чтобы создать начальный <tt>view.el</tt>.
    </p>

<pre class="runnable">
var view = new Backbone.View;

var el = view.make("b", {"class": "bold"}, "Жырнота! ");

$("#make-demo").append(el);
</pre>

<div id="make-demo"></div>

    <p id="View-delegateEvents">
      <b class="header">delegateEvents</b><code>delegateEvents([events])</code>
      <br />
      Использует функцию <tt>delegate</tt> из jQuery для декларативного описания обработчиков DOM-событий 
      внутри представления.
      Если хэш <b>events</b> не передан явно, используется <tt>this.events</tt>.
      События записываются в следующем формате <tt>{"событие селектор": "обработчик"}</tt>.
      Обработчик может быть как именем метода представления, так и напрямую функцией. 
      Если опустить <tt>селектор</tt>, то событие будет привязано к корневому элементу представления.
      (<tt>this.el</tt>). По умолчанию <tt>delegateEvents</tt> вызывается внутри конструктора за вас,
      так что если ваш хэш <tt>events</tt> прост, все ваши DOM-события уже будут снабжены обработчиками,
      и вам не придется вызывать этот метод вручную.
    </p>

    <p>
      Свойство <tt>events</tt> может так же быть определено как функция, которая 
      возвращает соответствующий хэш, чтобы было проще программно описать ваши 
      события, так же как и унаследовать их от родительского преставления.
    </p>

    <p>
      Использование <b>delegateEvents</b> предоставляет несколько преимуществ перед ручным 
      навешиванием обработчиков с помощью jQuery во время <a href="#View-render">рендеринга</a>. Все присоединенные
      коллбеки привязываются к представлению перед передачей их в jQuery, так что при их вызове
      <tt>this</tt> продолжает ссылаться на экземпляр представления. Когда
      <b>delegateEvents</b> запускается снова (возможно, с другим хэшем событий)
      все коллбеки удаляются и делегируются заново &mdash; что удобно для представлений,
      которым нужно менять поведение в разных режимах.
    </p>

    <p>
      Представление, которое отображает документ в результатах поиска может 
      выглядеть примерно так:
    </p>

<pre>
var DocumentView = Backbone.View.extend({

  events: {
    "dblclick"                : "open",
    "click .icon.doc"         : "select",
    "contextmenu .icon.doc"   : "showMenu",
    "click .show_notes"       : "toggleNotes",
    "click .title .lock"      : "editAccessLevel",
    "mouseover .title .date"  : "showTooltip"
  },

  render: function() {
    $(this.el).html(this.template(this.model.toJSON()));
    return this;
  },

  open: function() {
    window.open(this.model.get("viewer_url"));
  },

  select: function() {
    this.model.set({selected: true});
  },

  ...

});
</pre>

    <p id="View-undelegateEvents">
      <b class="header">undelegateEvents</b><code>undelegateEvents()</code>
      <br />
      Удаляет все делегированные события. Применяется, если нужно временно деактивировать либо
      удалить представление из DOM.
    </p>

    <h2 id="Utility">Utility Functions</h2>

    <p id="Utility-noConflict">
      <b class="header">noConflict</b><code>var backbone = Backbone.noConflict();</code>
      <br />
      Откатывает объект <tt>Backbone</tt> в предыдущее значение. Можно
      использовать возвращенное из <tt>Backbone.noConflict()</tt> значение, чтобы хранить
      ссылку на Backbone. Находит применение при внедрении Backbone на третье-сторонние сайты,
      где вы не хотите испортить существующий Backbone.
    </p>

<pre>
var localBackbone = Backbone.noConflict();
var model = localBackbone.Model.extend(...);
</pre>

    <p id="Utility-setDomLibrary">
      <b class="header">setDomLibrary</b><code>Backbone.setDomLibrary(jQueryNew);</code>
      <br />
      Если у вас несколько копий <tt>jQuery</tt> на странице, или если вы хотите
      приказать Backbone использовать определенный объект в качестве DOM / Ajax библиотеки,
      это функция для вас.
    </p>

    <h2 id="examples">Examples</h2>

    <p>
      The list of examples that follows, while long, is not exhaustive. If you've
      worked on an app that uses Backbone, please add it to the
      <a href="https://github.com/documentcloud/backbone/wiki/Projects-and-Companies-using-Backbone">wiki page of Backbone apps</a>.
    </p>

    <p id="examples-todos">
      <a href="http://jgn.me/">Jérôme Gravel-Niquet</a> has contributed a
      <a href="examples/todos/index.html">Todo List application</a>
      that is bundled in the repository as Backbone example. If you're wondering
      where to get started with Backbone in general, take a moment to
      <a href="docs/todos.html">read through the annotated source</a>. The app uses a
      <a href="docs/backbone-localstorage.html">LocalStorage adapter</a>
      to transparently save all of your todos within your browser, instead of
      sending them to a server. Jérôme also has a version hosted at
      <a href="http://localtodos.com/">localtodos.com</a> that uses a
      <a href="http://github.com/jeromegn/backbone-mootools">MooTools-backed version of Backbone</a>
      instead of jQuery.
    </p>

    <div style="text-align: center;">
      <a href="examples/todos/index.html">
        <img src="docs/images/todos.png" alt="Todos" class="example_image" />
      </a>
    </div>

    <h2 id="examples-documentcloud">DocumentCloud</h2>

    <p>
      The <a href="http://www.documentcloud.org/public/#search/">DocumentCloud workspace</a>
      is built on Backbone.js, with <i>Documents</i>, <i>Projects</i>,
      <i>Notes</i>, and <i>Accounts</i> all as Backbone models and collections.
      If you're interested in history &mdash; both Underscore.js and Backbone.js
      were originally extracted from the DocumentCloud codebase, and packaged
      into standalone JS libraries.
    </p>

    <div style="text-align: center;">
      <a href="http://www.documentcloud.org/public/#search/">
        <img src="docs/images/dc-workspace.png" alt="DocumentCloud Workspace" class="example_image" />
      </a>
    </div>

    <h2 id="examples-linkedin">LinkedIn Mobile</h2>

    <p>
      <a href="http://www.linkedin.com/">LinkedIn</a> used Backbone.js to create
      its <a href="http://www.linkedin.com/static?key=mobile">next-generation HTML5 mobile web app</a>.
      Backbone made it easy to keep the app modular, organized and extensible so
      that it was possible to program the complexities of LinkedIn's user experience.
      The app also uses <a href="http://zeptojs.com/">Zepto</a>,
      <a href="http://documentcloud.github.com/underscore/">Underscore.js</a>,
      <a href="http://sass-lang.com/">SASS</a>, <a href="http://cubiq.org/iscroll">iScroll</a>,
      HTML5 LocalStorage and Canvas.
    </p>

    <div style="text-align: center;">
      <a href="http://www.linkedin.com/static?key=mobile">
        <img src="docs/images/linkedin-mobile.png" alt="LinkedIn Mobile" class="example_image" />
      </a>
    </div>

    <h2 id="examples-flow">Flow</h2>

    <p>
      <a href="http://www.metalabdesign.com/">MetaLab</a> used Backbone.js to create
      <a href="http://www.getflow.com/">Flow</a>, a task management app for teams. The
      workspace relies on Backbone.js to construct task views, activities, accounts,
      folders, projects, and tags. You can see the internals under <tt>window.Flow</tt>.
    </p>

    <div style="text-align: center;">
      <a href="http://www.getflow.com/">
        <img src="docs/images/flow.png" alt="Flow" class="example_image" />
      </a>
    </div>

    <h2 id="examples-audiovroom">AudioVroom</h2>

    <p>
      <a href="http://www.audiovroom.com/">AudioVroom</a> is a free music
      streaming app that allows you to listen to your Facebook friends like
      radio stations. It relies heavily on Backbone (views and song management)
      and also features a responsive grid-based design (using CSS3 media-queries)
      to deliver a unified user experience on desktops, mobiles, and tablets alike.
      Being a pure Backbone app, AudioVroom is only 60kb compressed, and can be
      entirely hosted on the CDN.
    </p>

    <div style="text-align: center;">
      <a href="http://www.audiovroom.com/">
        <img src="docs/images/audiovroom.png" alt="AudioVroom" class="example_image" />
      </a>
    </div>

    <h2 id="examples-foursquare">Foursquare</h2>

    <p>
      Foursquare is a fun little startup that helps you meet up with friends,
      discover new places, and save money. Backbone Models are heavily used in
      the core JavaScript API layer and Views power many popular features like
      the <a href="https://foursquare.com">homepage map</a> and
      <a href="https://foursquare.com/seriouseats/list/the-best-doughnuts-in-ny">lists</a>.
    </p>

    <div style="text-align: center;">
      <a href="http://foursquare.com">
        <img src="docs/images/foursquare.png" alt="Foursquare" class="example_image" />
      </a>
    </div>

    <h2 id="examples-wunderkit">Wunderkit</h2>

    <p>
      <a href="http://get.wunderkit.com/">Wunderkit</a> is a productivity and
      social collaboration platform. It
      uses Backbone.js as the foundation for the single-page application,
      which is backed by a RESTful Rails API.
      The freedom and agility that Backbone gives to developers
      made it possible to build Wunderkit in a very short time and
      extend it with custom features: a write-through cache using HTML5
      localStorage, and a view hierarchy extension to easily manage trees of
      sub-views. Aside from Backbone, Wunderkit also
      depends on <a href="http://jquery.com/">jQuery</a>, <a href="http://underscorejs.org/">Underscore</a>, <a href="http://requirejs.org/">Require.js</a>, <a href="http://lesscss.org/">LESS</a> and doT.js templates.
    </p>

    <div style="text-align: center;">
      <a href="http://get.wunderkit.com/">
        <img src="docs/images/wunderkit.png" alt="Wunderkit" class="example_image" />
      </a>
    </div>

    <h2 id="examples-khan-academy">Khan Academy</h2>

    <p>
      <a href="http://www.khanacademy.org">Khan Academy</a> is on a mission to
      provide a free world-class education to anyone anywhere. With thousands of
      videos, hundreds of JavaScript-driven exercises, and big plans for the
      future, Khan Academy uses Backbone to keep frontend code modular and organized.
      <a href="https://khanacademy.kilnhg.com/Code/Website/Group/stable/Files/javascript/profile-package?rev=tip">User profiles</a>
      and <a href="https://khanacademy.kilnhg.com/Code/Website/Group/stable/File/javascript/shared-package/goals.js?rev=tip">goal setting</a>
      are implemented with Backbone, <a href="http://jquery.com/">jQuery</a> and <a href="http://handlebarsjs.com/">Handlebars</a>, and most new feature
      work is being pushed to the client side, greatly increasing the quality of
      <a href="https://github.com/Khan/khan-api/">the API</a>.
    </p>

    <div style="text-align: center;">
      <a href="http://www.khanacademy.org">
        <img src="docs/images/khan-academy.png" alt="Khan Academy" class="example_image" />
      </a>
    </div>

    <h2 id="examples-do">Do</h2>

    <p>
      <a href="http://do.com">Do</a> is a social productivity app that makes it
      easy to work on tasks, track projects, and take notes with your team.
      The <a href="http://do.com">Do.com</a> web application was built from the
      ground up to work seamlessly on your smartphone, tablet and computer. The
      team used Backbone, <a href="http://coffeescript.org/">CoffeeScript</a> and <a href="http://handlebarsjs.com/">Handlebars</a> to build a full-featured
      app in record time and rolled their own extensions for complex navigation
      and model sync support.
    </p>

    <div style="text-align: center;">
      <a href="http://do.com">
        <img src="docs/images/do.png" alt="Do" class="example_image" />
      </a>
    </div>

    <h2 id="examples-posterous">Posterous</h2>

    <p>
      <a href="https://posterous.com/">Posterous Spaces</a> is
      <a href="http://technology.posterous.com/posterous-spaces-is-built-on-backbonejs">built on Backbone</a>.
      The models and collections mirror the public
      <a href="http://posterous.com/api">Posterous API</a>. Backbone made it easy
      for the team to create a JavaScript-heavy application with complex
      interactions and state maintenance. Spaces also uses <a href="http://coffeescript.org/">CoffeeScript</a>,
      <a href="http://underscorejs.org/">Underscore.js</a>, <a href="https://github.com/creationix/haml-js">Haml.js</a>, <a href="http://sass-lang.com/">Sass</a>, <a href="http://compass-style.org/">Compass</a>, and of course <a href="http://jquery.com">jQuery</a>.
    </p>

    <div style="text-align: center;">
      <a href="https://posterous.com/">
        <img src="docs/images/posterous-spaces.png" alt="Posterous Spaces" class="example_image" />
      </a>
    </div>

    <h2 id="examples-groupon">Groupon Now!</h2>

    <p>
      <a href="http://www.groupon.com/now">Groupon Now!</a> helps you find
      local deals that you can buy and use right now. When first developing
      the product, the team decided it would be AJAX heavy with smooth transitions
      between sections instead of full refreshes, but still needed to be fully
      linkable and shareable. Despite never having used Backbone before, the
      learning curve was incredibly quick &mdash; a prototype was hacked out in an
      afternoon, and the team was able to ship the product in two weeks.
      Because the source is minimal and understandable, it was easy to
      add several Backbone extensions for Groupon Now!: changing the router
      to handle URLs with querystring parameters, and adding a simple
      in-memory store for caching repeated requests for the same data.
    </p>

    <div style="text-align: center;">
      <a href="http://www.groupon.com/now">
        <img src="docs/images/groupon.png" alt="Groupon Now!" class="example_image" />
      </a>
    </div>

    <h2 id="examples-basecamp">Basecamp Mobile</h2>

    <p>
      <a href="http://37signals.com/">37Signals</a> used Backbone.js to create
      <a href="http://basecamphq.com/mobile">Basecamp Mobile</a>, the mobile version
      of their popular project management software. You can access all your Basecamp
      projects, post new messages, and comment on milestones (all represented
      internally as Backbone.js models).
    </p>

    <div style="text-align: center;">
      <a href="http://basecamphq.com/mobile">
        <img src="docs/images/basecamp-mobile.png" alt="Basecamp Mobile" class="example_image" />
      </a>
    </div>

    <h2 id="examples-slavery-footprint">Slavery Footprint</h2>

    <p>
      <a href="http://slaveryfootprint.org/survey">Slavery Footprint</a>
      allows consumers to visualize how their consumption habits are
      connected to modern-day slavery and provides them with an opportunity
      to have a deeper conversation with the companies that manufacture the
      goods they purchased.
      Based in Oakland, California, the Slavery Footprint team works to engage
      individuals, groups, and businesses to build awareness for and create
      deployable action against forced labor, human trafficking, and modern-day
      slavery through online tools, as well as off-line community education and
      mobilization programs.
    </p>

    <div style="text-align: center;">
      <a href="http://slaveryfootprint.org/survey">
        <img src="docs/images/slavery-footprint.png" alt="Slavery Footprint" class="example_image" />
      </a>
    </div>

    <h2 id="examples-stripe">Stripe</h2>

    <p>
      <a href="https://stripe.com">Stripe</a> provides an API for accepting
      credit cards on the web. Stripe's
      <a href="https://manage.stripe.com">management interface</a> was recently
      rewritten from scratch in Coffeescript using Backbone.js as the primary
      framework, <a href="https://github.com/sstephenson/eco">Eco</a> for templates, <a href="http://sass-lang.com/">Sass</a> for stylesheets, and <a href="https://github.com/sstephenson/stitch">Stitch</a> to package
      everything together as <a href="http://commonjs.org/">CommonJS</a> modulas. The new app uses
      <a href="https://stripe.com/docs/api">Stripe's API</a> directly for the
      majority of its actions; Backbone.js models made it simple to map
      client-side models to their corresponding RESTful resources.
    </p>

    <div style="text-align: center;">
      <a href="https://stripe.com">
        <img src="docs/images/stripe.png" alt="Stripe" class="example_image" />
      </a>
    </div>

    <p>
      <a href="http://airbnb.com">Airbnb</a> used Backbone.js and
      <a href="http://coffeescript.org">CoffeeScript</a> to quickly build
      <a href="http://m.airbnb.com">Airbnb Mobile</a>
      in six weeks with a team of three. The mobile version of Airbnb lets you
      discover and book rental spaces directly from your phone: from a private
      apartment to a private island...
    </p>

    <div style="text-align: center;">
      <a href="http://m.airbnb.com/">
        <img src="docs/images/airbnb-mobile.png" alt="Airbnb-Mobile" class="example_image" />
      </a>
    </div>

    <h2 id="examples-diaspora">Diaspora</h2>

    <p>
      <a href="http://www.joindiaspora.com/">Diaspora</a> is a distributed social
      network, formed from a number of independently operated <i>pods</i>.
      You own your personal data, and control with whom you share.
      All of Diaspora is <a href="https://github.com/diaspora/diaspora">open-source</a>
      code, built with <a href="http://rubyonrails.org/">Rails</a> and Backbone.js.
    </p>

    <div style="text-align: center;">
      <a href="http://www.joindiaspora.com/">
        <img src="docs/images/diaspora.png" alt="Diaspora" class="example_image" />
      </a>
    </div>

    <h2 id="examples-soundcloud">SoundCloud Mobile</h2>

    <p>
      <a href="http://soundcloud.com">SoundCloud</a> is the leading sound sharing
      platform on the internet, and Backbone.js provides the foundation for
      <a href="http://m.soundcloud.com">SoundCloud Mobile</a>. The project uses
      the public SoundCloud <a href="http://soundcloud.com/developers">API</a>
      as a data source (channeled through a nginx proxy),
      <a href="http://api.jquery.com/category/plugins/templates/">jQuery templates</a>
      for the rendering, <a href="http://docs.jquery.com/Qunit">Qunit
      </a> and <a href="http://www.phantomjs.org/">PhantomJS</a> for
      the testing suite. The JS code, templates and CSS are built for the
      production deployment with various Node.js tools like
      <a href="https://github.com/dsimard/ready.js">ready.js</a>,
      <a href="https://github.com/mde/jake">Jake</a>,
      <a href="https://github.com/tmpvar/jsdom">jsdom</a>.
      The <b>Backbone.History</b> was modified to support the HTML5 <tt>history.pushState</tt>.
      <b>Backbone.sync</b> was extended with an additional SessionStorage based cache
      layer.
    </p>

    <div style="text-align: center;">
      <a href="http://m.soundcloud.com">
        <img src="docs/images/soundcloud.png" alt="SoundCloud" class="example_image" />
      </a>
    </div>

    <h2 id="examples-pandora">Pandora</h2>

    <p>
      When <a href="http://www.pandora.com/newpandora">Pandora</a> redesigned
      their site in HTML5, they chose Backbone.js to help
      manage the user interface and interactions. For example, there's a model
      that represents the "currently playing track", and multiple views that
      automatically update when the current track changes. The station list is a
      collection, so that when stations are added or changed, the UI stays up to date.
    </p>

    <div style="text-align: center;">
      <a href="http://www.pandora.com/newpandora">
        <img src="docs/images/pandora.png" alt="Pandora" class="example_image" />
      </a>
    </div>

    <h2 id="examples-code-school">Code School</h2>

    <p>
      <a href="http://www.codeschool.com">Code School</a> courses teach people
      about various programming topics like <a href="http://coffeescript.org">CoffeeScript</a>, CSS, Ruby on Rails,
      and more. The new Code School course
      <a href="http://coffeescript.codeschool.com/levels/1/challenges/1">challenge page</a>
      is built from the ground up on Backbone.js, using
      everything it has to offer: the router, collections, models, and complex
      event handling. Before, the page was a mess of <a href="http://jquery.com/">jQuery</a> DOM manipulation
      and manual Ajax calls. Backbone.js helped introduce a new way to
      think about developing an organized front-end application in Javascript.
    </p>

    <div style="text-align: center;">
      <a href="http://www.codeschool.com">
        <img src="docs/images/code-school.png" alt="Code School" class="example_image" />
      </a>
    </div>

    <h2 id="examples-cloudapp">CloudApp</h2>

    <p>
      <a href="http://getcloudapp.com">CloudApp</a> is simple file and link
      sharing for the Mac. Backbone.js powers the web tools
      which consume the <a href="http://developer.getcloudapp.com">documented API</a>
      to manage Drops. Data is either pulled manually or pushed by
      <a href="http://pusher.com">Pusher</a> and fed to
      <a href="http://github.com/janl/mustache.js">Mustache</a> templates for
      rendering. Check out the <a href="http://cloudapp.github.com/engine">annotated source code</a>
      to see the magic.
    </p>

    <div style="text-align: center;">
      <a href="http://getcloudapp.com">
        <img src="docs/images/cloudapp.png" alt="CloudApp" class="example_image" />
      </a>
    </div>

    <h2 id="examples-seatgeek">SeatGeek</h2>

    <p>
      <a href="http://seatgeek.com">SeatGeek</a>'s stadium ticket maps were originally
      developed with <a href="http://prototypejs.org/">Prototype.js</a>. Moving to Backbone.js and <a href="http://jquery.com/">jQuery</a> helped organize
      a lot of the UI code, and the increased structure has made adding features
      a lot easier. SeatGeek is also in the process of building a mobile
      interface that will be Backbone.js from top to bottom.
    </p>

    <div style="text-align: center;">
      <a href="http://seatgeek.com">
        <img src="docs/images/seatgeek.png" alt="SeatGeek" class="example_image" />
      </a>
    </div>

    <h2 id="examples-grove">Grove.io</h2>

    <p>
      <a href="http://grove.io">Grove.io</a> provides hosted IRC for teams.
      Backbone.js powers Grove's web client together with <a href="http://handlebarsjs.com/">Handlebars.js templating</a>.
      Updates to chat stream are pulled in realtime using long-polling.
    </p>

    <div style="text-align: center;">
      <a href="http://grove.io">
        <img src="docs/images/grove.png" alt="Grove.io" class="example_image" />
      </a>
    </div>

    <h2 id="examples-kicksend">Kicksend</h2>

    <p>
      <a href="http://kicksend.com">Kicksend</a> is a real-time file sharing
      platform that helps everyday people send and receive files of any size
      with their friends and family. Kicksend's web application makes extensive
      use of Backbone.js to model files, friends, lists and activity streams.
    </p>

    <div style="text-align: center;">
      <a href="http://kicksend.com">
        <img src="docs/images/kicksend.png" alt="Kicksend" class="example_image" />
      </a>
    </div>

    <h2 id="examples-shortmail">Shortmail</h2>

    <p>
      <a href="http://410labs.com/">410 Labs</a> uses Backbone.js at
      <a href="http://shortmail.com/">Shortmail.com</a> to build a
      fast and responsive inbox, driven by the <a href="#Router">Router</a>.
      Backbone works with a <a href="http://rubyonrails.org/">Rails</a> backend to provide inbox rendering, archiving,
      replying, composing, and even a changes feed. Using Backbone's event-driven
      model and pushing the rendering and interaction logic to the front-end
      has not only simplified the view code, it has also drastically reduced the
      load on Shortmail's servers.
    </p>

    <div style="text-align: center;">
      <a href="http://shortmail.com">
        <img src="docs/images/shortmail.png" alt="Shortmail" class="example_image" />
      </a>
    </div>

    <h2 id="examples-battlefield">Battlefield Play4Free</h2>

    <p>
      <a href="http://battlefield.play4free.com/">Battlefield Play4Free</a> is
      the latest free-to-play first person shooter from the same team that
      created Battlefield Heroes. The in-game HTML5 front-end for makes heavy use of
      Backbone's views, models and collections to help keep the code modular
      and structured.
    </p>

    <div style="text-align: center;">
      <a href="http://battlefield.play4free.com/">
        <img src="docs/images/battlefield.png" alt="Battlefield Play4Free" class="example_image" />
      </a>
    </div>

    <h2 id="examples-salon">Salon.io</h2>

    <p>
      <a href="http://salon.io">Salon.io</a> provides a space where photographers,
      artists and designers freely arrange their visual art on virtual walls.
      <a href="http://salon.io">Salon.io</a> runs on <a href="http://rubyonrails.org/">Rails</a>, but does not use
      much of the traditional stack, as the entire frontend is designed as a
      single page web app, using Backbone.js and
      <a href="http://coffeescript.org">CoffeeScript</a>.
    </p>

    <div style="text-align: center;">
      <a href="http://salon.io">
        <img src="docs/images/salon.png" alt="Salon.io" class="example_image" />
      </a>
    </div>

    <h2 id="examples-tilemill">TileMill</h2>

    <p>
      Our fellow
      <a href="http://www.newschallenge.org/">Knight Foundation News Challenge</a>
      winners, <a href="http://mapbox.com/">MapBox</a>, created an open-source
      map design studio with Backbone.js:
      <a href="http://mapbox.github.com/tilemill/">TileMill</a>.
      TileMill lets you manage map layers based on shapefiles and rasters, and
      edit their appearance directly in the browser with the
      <a href="https://github.com/mapbox/carto">Carto styling language</a>.
      Note that the gorgeous <a href="http://mapbox.com/">MapBox</a> homepage
      is also a Backbone.js app.
    </p>

    <div style="text-align: center;">
      <a href="http://mapbox.github.com/tilemill/">
        <img src="docs/images/tilemill.png" alt="TileMill" class="example_image" />
      </a>
    </div>

    <h2 id="examples-blossom">Blossom</h2>

    <p>
      <a href="http://blossom.io">Blossom</a> is a lightweight project management
      tool for lean teams. Backbone.js is heavily used in combination with
      <a href="http://coffeescript.org">CoffeeScript</a> to provide a smooth
      interaction experience. The RESTful backend is built
      with <a href="http://flask.pocoo.org/">Flask</a> on Google App Engine.
    </p>

    <div style="text-align: center;">
      <a href="http://blossom.io">
        <img src="docs/images/blossom.png" alt="Blossom" class="example_image" />
      </a>
    </div>

    <h2 id="examples-animoto">Animoto</h2>

    <p>
      <a href="http://animoto.com">Animoto</a> is a web-based video creation
      platform, where users can upload their own photos, video clips and music
      and create beautifully orchestrated slideshows. The video editor app is
      built with Backbone.js and <a href="http://jquery.com">jQuery</a> and interfaces with a <a href="http://rubyonrails.org/">Ruby on Rails</a>
      backend. Backbone has provided structure which helps the Animoto team
      iterate quickly on the codebase while reducing the risk of regressions.
    </p>

    <div style="text-align: center;">
      <a href="http://www.animoto.com/">
        <img src="docs/images/animoto.png" alt="Tzigla" class="Animoto Video Editor" />
      </a>
    </div>

    <h2 id="examples-chaincal">ChainCal</h2>

    <h2 id="examples-chaincal">ChainCal</h2>

    <p>
      <a href="http://chaincalapp.com/">ChainCal</a>
      is an iPhone app that helps you to track your daily goals in a
      minimalist, visual way. The app is written almost entirely in <a href="http://coffeescript.org/">CoffeeScript</a>,
      Backbone handles the models, collections and views, and persistence is
      done with a Backbone.sync localStorage adapter. Templates are written in
      <a href="https://github.com/sstephenson/eco">Eco</a> and the app is packaged with <a href="http://brunch.io/">Brunch</a> and deployed with <a href="http://phonegap.com/">Phonegap</a>.
    </p>

    <div style="text-align: center;">
      <a href="http://chaincalapp.com/">
        <img src="docs/images/chaincal.png" alt="ChainCal" class="example_image" />
      </a>
    </div>

    <h2 id="examples-attictv">AtticTV</h2>

    <p>
      <a href="http://attictv.com/">AtticTV</a> is MTV for the Youtube Generation:
      kick back and relax while watching the best
      music videos of your favorite genre. The videos are synced across the
      world, so, you're never watching alone on AtticTV. AtticTV is served by
      <a href="http://nodejs.org/">NodeJS</a> written in <a href="http://coffeescript.org/">CoffeeScript</a> with <a href="http://socket.io/">Socket.IO</a> as data transport. The
      frontend is built with Backbone.js with pushstate support, <a href="http://jquery.com/">jQuery</a>, and
      <a href="http://jade-lang.com/">Jade templates</a>.
    </p>

    <div style="text-align: center;">
      <a href="http://attictv.com/">
        <img src="docs/images/attictv.png" alt="AtticTV" class="example_image" />
      </a>
    </div>

    <h2 id="examples-decide">Decide</h2>

    <p>
      <a href="http://decide.com">Decide.com</a> helps people decide when to buy
      consumer electronics. It relies heavily on Backbone.js to render and
      update its Search Results Page. An "infinite scroll" feature takes
      advantage of a SearchResults model containing a collection of
      Product models to fetch more results and render them on the fly
      with <a href="http://mustache.github.com">Mustache</a>. A SearchController keeps everything in sync and
      maintains page state in the URL. Backbone also powers the user
      accounts and settings management.
    </p>

    <div style="text-align: center;">
      <a href="http://decide.com">
        <img src="docs/images/decide.png" alt="Decide" class="example_image" />
      </a>
    </div>

    <h2 id="examples-editd">EDITD</h2>

    <p>
      <a href="http://editd.com">EDITD</a> aims to disrupt the fashion
      industry with big data. The next generation of their web application
      is based on a custom JavaScript framework that builds on top of
      Backbone. The back end is
      <a href="https://www.djangoproject.com/">Django</a> +
      <a href="http://www.elasticsearch.org/">Elastic Search</a>,
      <a href="http://handlebarsjs.com/">Handlebars.js</a> is used for templating,
      <a href="http://code.google.com/p/js-test-driver/">jsTestDriver</a> for testing, and
      <a href="http://jashkenas.github.com/docco/">Docco</a> for quick documentation.
    </p>

    <div style="text-align: center;">
      <a href="http://editd.com">
        <img src="docs/images/editd.png" alt="EDITD" class="example_image" />
      </a>
    </div>

    <h2 id="examples-trello">Trello</h2>

    <p>
      <a href="http://trello.com">Trello</a> is a collaboration tool that
      organizes your projects into boards. A Trello board holds many lists of
      cards, which can contain checklists, files and conversations, and may be
      voted on and organized with labels. Updates on the board happen in
      real time. The site was built ground up using Backbone.js for all the
      models, views, and routes.
    </p>

    <div style="text-align: center;">
      <a href="http://trello.com">
        <img src="docs/images/trello.png" alt="Trello" class="example_image" />
      </a>
    </div>

    <h2 id="examples-ducksboard">Ducksboard</h2>

    <p>
    <a href="http://ducksboard.com/">Ducksboard</a> is an online dashboard
      for your SaaS and business metrics, built with
      <a href="http://twistedmatrix.com/">Twisted</a> and
      <a href="http://www.djangoproject.com/">Django</a> and using WebSockets.
      It can fetch data from popular providers or accept input through
      a simple API.
      Backbone is used throughout Ducksboard's interface, every widget,
      dashboard and SaaS account is a Backbone model with several views
      (data display, configuration view). A
      <a href="https://public.ducksboard.com/BFVzKVPeOoWRsL0VZ8MZ/">live demo</a>
      is available.
    </p>

    <div style="text-align: center;">
      <a href="http://ducksboard.com/">
        <img src="docs/images/ducksboard.png" alt="Ducksboard" class="example_image" />
      </a>
    </div>

    <h2 id="examples-quietwrite">QuietWrite</h2>

    <p>
      <a href="http://www.twitter.com/jamesjyu">James Yu</a> used Backbone.js to
      create <a href="http://www.quietwrite.com/">QuietWrite</a>, an app
      that gives writers a clean and quiet interface to concentrate on the text itself.
      The editor relies on Backbone to persist document data to the server. He
      followed up with a Backbone.js + <a href="http://rubyonrails.org/">Rails</a> tutorial that describes how to implement
      <a href="http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/">CloudEdit, a simple document editing app</a>.
    </p>

    <div style="text-align: center;">
      <a href="http://www.quietwrite.com/">
        <img src="docs/images/quietwrite.png" alt="QuietWrite" class="example_image" />
      </a>
    </div>

    <h2 id="examples-tzigla">Tzigla</h2>

    <p>
      <a href="http://twitter.com/evilchelu">Cristi Balan</a> and
      <a href="http://dira.ro">Irina Dumitrascu</a> created
      <a href="http://tzigla.com">Tzigla</a>, a collaborative drawing
      application where artists make tiles that connect to each other to
      create <a href="http://tzigla.com/boards/1">surreal drawings</a>.
      Backbone models help organize the code, routers provide
      <a href="http://tzigla.com/boards/1#!/tiles/2-2">bookmarkable deep links</a>,
      and the views are rendered with
      <a href="https://github.com/creationix/haml-js">haml.js</a> and
      <a href="http://zeptojs.com/">Zepto</a>.
      Tzigla is written in Ruby (<a href="http://rubyonrails.org/">Rails</a>) on the backend, and
      <a href="http://coffeescript.org">CoffeeScript</a> on the frontend, with
      <a href="http://documentcloud.github.com/jammit/">Jammit</a>
      prepackaging the static assets.
    </p>

    <div style="text-align: center;">
      <a href="http://www.tzigla.com/">
        <img src="docs/images/tzigla.png" alt="Tzigla" class="example_image" />
      </a>
    </div>

    <h2 id="faq">F.A.Q.</h2>

    <p id="FAQ-events">
      <b class="header">Catalog of Events</b>
      <br />
      Here's a list of all of the built-in events that Backbone.js can fire.
      You're also free to trigger your own events on Models and Views as you
      see fit.
    </p>

    <ul class="small">
      <li><b>"add"</b> (model, collection) &mdash; when a model is added to a collection. </li>
      <li><b>"remove"</b> (model, collection) &mdash; when a model is removed from a collection. </li>
      <li><b>"reset"</b> (collection) &mdash; when the collection's entire contents have been replaced. </li>
      <li><b>"change"</b> (model, options) &mdash; when a model's attributes have changed. </li>
      <li><b>"change:[attribute]"</b> (model, value, options) &mdash; when a specific attribute has been updated. </li>
      <li><b>"destroy"</b> (model, collection) &mdash; when a model is <a href="#Model-destroy">destroyed</a>. </li>
      <li><b>"sync"</b> (model, collection) &mdash; triggers whenever a model has been successfully synced to the server. </li>
      <li><b>"error"</b> (model, collection) &mdash; when a model's validation fails, or a <a href="#Model-save">save</a> call fails on the server. </li>
      <li><b>"route:[name]"</b> (router) &mdash; when one of a router's routes has matched. </li>
      <li><b>"all"</b> &mdash; this special event fires for <i>any</i> triggered event, passing the event name as the first argument. </li>
    </ul>

    <p id="FAQ-tim-toady">
      <b class="header">There's More Than One Way To Do It</b>
      <br />
      It's common for folks just getting started to treat the examples listed
      on this page as some sort of gospel truth. In fact, Backbone.js is intended
      to be fairly agnostic about many common patterns in client-side code.
      For example...
    </p>

    <p>
      <b>References between Models and Views</b> can be handled several ways.
      Some people like to have direct pointers, where views correspond 1:1 with
      models (<tt>model.view</tt> and <tt>view.model</tt>). Others prefer to have intermediate
      "controller" objects that orchestrate the creation and organization of
      views into a hierarchy. Others still prefer the evented approach, and always
      fire events instead of calling methods directly. All of these styles work well.
    </p>

    <p>
      <b>Batch operations</b> on Models are common, but often best handled differently
      depending on your server-side setup. Some folks don't mind making individual
      Ajax requests. Others create explicit resources for RESTful batch operations:
      <tt>/notes/batch/destroy?ids=1,2,3,4</tt>. Others tunnel REST over JSON, with the
      creation of "changeset" requests:
    </p>

<pre>
  {
    "create":  [array of models to create]
    "update":  [array of models to update]
    "destroy": [array of model ids to destroy]
  }
</pre>

    <p>
      <b>Feel free to define your own events.</b> <a href="#Events">Backbone.Events</a>
      is designed so that you can mix it in to any JavaScript object or prototype.
      Since you can use any string as an event, it's often handy to bind
      and trigger your own custom events: <tt>model.on("selected:true")</tt> or
      <tt>model.on("editing")</tt>
    </p>

    <p>
      <b>Render the UI</b> as you see fit. Backbone is agnostic as to whether you
      use <a href="http://documentcloud.github.com/underscore/#template">Underscore templates</a>,
      <a href="https://github.com/janl/mustache.js">Mustache.js</a>, direct DOM
      manipulation, server-side rendered snippets of HTML, or
      <a href="http://jqueryui.com/">jQuery UI</a> in your <tt>render</tt> function.
      Sometimes you'll create a view for each model ... sometimes you'll have a
      view that renders thousands of models at once, in a tight loop. Both can be
      appropriate in the same app, depending on the quantity of data involved,
      and the complexity of the UI.
    </p>

    <p id="FAQ-nested">
      <b class="header">Nested Models &amp; Collections</b>
      <br />
      It's common to nest collections inside of models with Backbone. For example,
      consider a <tt>Mailbox</tt> model that contains many <tt>Message</tt> models.
      One nice pattern for handling this is have a <tt>this.messages</tt> collection
      for each mailbox, enabling the lazy-loading of messages, when the mailbox
      is first opened ... perhaps with <tt>MessageList</tt> views listening for
      <tt>"add"</tt> and <tt>"remove"</tt> events.
    </p>

<pre>
var Mailbox = Backbone.Model.extend({

  initialize: function() {
    this.messages = new Messages;
    this.messages.url = '/mailbox/' + this.id + '/messages';
    this.messages.on("reset", this.updateCounts);
  },

  ...

});

var Inbox = new Mailbox;

// And then, when the Inbox is opened:

Inbox.messages.fetch();
</pre>

    <p>
      If you're looking for something more opinionated, there are a number of
      Backbone plugins that add sophisticated associations among models,
      <a href="https://github.com/documentcloud/backbone/wiki/Extensions%2C-Plugins%2C-Resources">available on the wiki</a>.
    </p>

    <p>
      Backbone doesn't include direct support for nested models and collections
      or "has many" associations because there are a number
      of good patterns for modeling structured data on the client side, and
      <i>Backbone should provide the foundation for implementing any of them.</i>
      You may want to&hellip;
    </p>

    <ul>
      <li>
        Mirror an SQL database's structure, or the structure of a NoSQL database.
      </li>
      <li>
        Use models with arrays of "foreign key" ids, and join to top level
        collections (a-la tables).
      </li>
      <li>
        For associations that are numerous, use a range of ids instead of an
        explicit list.
      </li>
      <li>
        Avoid ids, and use direct references, creating a partial object graph
        representing your data set.
      </li>
      <li>
        Lazily load joined models from the server, or lazily deserialize nested
        models from JSON documents.
      </li>
    </ul>

    <p id="FAQ-bootstrap">
      <b class="header">Loading Bootstrapped Models</b>
      <br />
      When your app first loads, it's common to have a set of initial models that
      you know you're going to need, in order to render the page. Instead of
      firing an extra AJAX request to <a href="#Collection-fetch">fetch</a> them,
      a nicer pattern is to have their data already bootstrapped into the page.
      You can then use <a href="#Collection-reset">reset</a> to populate your
      collections with the initial data. At DocumentCloud, in the
      <a href="http://en.wikipedia.org/wiki/ERuby">ERB</a> template for the
      workspace, we do something along these lines:
    </p>

<pre>
&lt;script&gt;
  var Accounts = new Backbone.Collection;
  Accounts.reset(&lt;%= @accounts.to_json %&gt;);
  var Projects = new Backbone.Collection;
  Projects.reset(&lt;%= @projects.to_json(:collaborators => true) %&gt;);
&lt;/script&gt;
</pre>

    <p>You have to <a href="http://mathiasbynens.be/notes/etago">escape</a>
    <tt>&lt;/</tt> within the JSON string, to prevent javascript injection
    attacks.

    <p id="FAQ-extending">
      <b class="header">Extending Backbone</b>
      <br />
      Many JavaScript libraries are meant to be insular and self-enclosed,
      where you interact with them by calling their public API, but never peek
      inside at the guts. Backbone.js is <i>not</i> that kind of library.
    </p>

    <p>
      Because it serves as a foundation for your application, you're meant to
      extend and enhance it in the ways you see fit &mdash; the entire source
      code is <a href="docs/backbone.html">annotated</a> to make this easier
      for you. You'll find that there's very little there apart from core
      functions, and most of those can be overriden or augmented should you find
      the need. If you catch yourself adding methods to <tt>Backbone.Model.prototype</tt>,
      or creating your own base subclass, don't worry &mdash; that's how things are
      supposed to work.
    </p>

    <p id="FAQ-mvc">
      <b class="header">How does Backbone relate to "traditional" MVC?</b>
      <br />
      Different implementations of the
      <a href="http://en.wikipedia.org/wiki/Model–View–Controller">Model-View-Controller</a>
      pattern tend to disagree about the definition of a controller. If it helps any, in
      Backbone, the <a href="#View">View</a> class can also be thought of as a
      kind of controller, dispatching events that originate from the UI, with
      the HTML template serving as the true view. We call it a View because it
      represents a logical chunk of UI, responsible for the contents of a single
      DOM element.
    </p>

    <p>
      Comparing the overall structure of Backbone to a server-side MVC framework
      like <b>Rails</b>, the pieces line up like so:
    </p>

    <ul>
      <li>
        <b>Backbone.Model</b> &ndash; Like a Rails model minus the class
        methods. Wraps a row of data in business logic.
      </li>
      <li>
        <b>Backbone.Collection</b> &ndash; A group of models on the client-side,
        with sorting/filtering/aggregation logic.
      </li>
      <li>
        <b>Backbone.Router</b> &ndash; Rails <tt>routes.rb</tt> + Rails controller
        actions. Maps URLs to functions.
      </li>
      <li>
        <b>Backbone.View</b> &ndash; A logical, re-usable piece of UI. Often,
        but not always, associated with a model.
      </li>
      <li>
        <b>Client-side Templates</b> &ndash; Rails <tt>.html.erb</tt> views,
        rendering a chunk of HTML.
      </li>
    </ul>

    <p id="FAQ-this">
      <b class="header">Binding "this"</b>
      <br />
      Perhaps the single most common JavaScript "gotcha" is the fact that when
      you pass a function as a callback, its value for <tt>this</tt> is lost. With
      Backbone, when dealing with <a href="#Events">events</a> and callbacks,
      you'll often find it useful to rely on
      <a href="http://documentcloud.github.com/underscore/#bind">_.bind</a> and
      <a href="http://documentcloud.github.com/underscore/#bindAll">_.bindAll</a>
      from Underscore.js.
    </p>

    <p>
      When binding callbacks to Backbone events, you can choose to pass an optional
      third argument to specify the <tt>this</tt> that will be used when the
      callback is later invoked:
    </p>

<pre>
var MessageList = Backbone.View.extend({

  initialize: function() {
    var messages = this.collection;
    messages.on("reset", this.render, this);
    messages.on("add", this.addMessage, this);
    messages.on("remove", this.removeMessage, this);
  }

});

// Later, in the app...

Inbox.messages.add(newMessage);
</pre>

    <p id="FAQ-rails">
      <b class="header">Working with Rails</b>
      <br />
      Backbone.js was originally extracted from
      <a href="http://www.documentcloud.org">a Rails application</a>; getting
      your client-side (Backbone) Models to sync correctly with your server-side
      (Rails) Models is painless, but there are still a few things to be aware of.
    </p>

    <p>
      By default, Rails adds an extra layer of wrapping around the JSON representation
      of models. You can disable this wrapping by setting:
    </p>

<pre>
ActiveRecord::Base.include_root_in_json = false
</pre>

    <p>
      ... in your configuration. Otherwise, override
      <a href="#Model-parse">parse</a> to pull model attributes out of the
      wrapper. Similarly, Backbone PUTs and POSTs direct JSON representations
      of models, where by default Rails expects namespaced attributes. You can
      have your controllers filter attributes directly from <tt>params</tt>, or
      you can override <a href="#Model-toJSON">toJSON</a> in Backbone to add
      the extra wrapping Rails expects.
    </p>

    <h2 id="changelog">Change Log</h2>

    <b class="header">0.9.2</b> &mdash; <small><i>March 21, 2012</i></small> &mdash; <a href="https://github.com/documentcloud/backbone/compare/0.9.1...0.9.2">Diff</a><br />
    <ul style="margin-top: 5px;">
      <li>
        Instead of throwing an error when adding duplicate models to a collection,
        Backbone will now silently skip them instead.
      </li>
      <li>
        Added <a href="#Collection-push">push</a>,
        <a href="#Collection-pop">pop</a>,
        <a href="#Collection-unshift">unshift</a>, and
        <a href="#Collection-shift">shift</a> to collections.
      </li>
      <li>
        A model's <a href="#Model-changed">changed</a> hash is now exposed for
        easy reading of the changed attribute delta, since the model's last
        <tt>"change"</tt> event.
      </li>
      <li>
        Added <a href="#Collection-where">where</a> to collections for simple
        filtering.
      </li>
      <li>
        You can now use a single <a href="#Events-off">off</a> call
        to remove all callbacks bound to a specific object.
      </li>
      <li>
        Bug fixes for nested individual change events, some of which may be
        "silent".
      </li>
      <li>
        Bug fixes for URL encoding in <tt>location.hash</tt> fragments.
      </li>
      <li>
        Bug fix for client-side validation in advance of a <tt>save</tt> call
        with <tt>{wait: true}</tt>.
      </li>
      <li>
        Updated / refreshed the example
        <a href="examples/todos/index.html">Todo List</a> app.
      </li>
    </ul>

    <b class="header">0.9.1</b> &mdash; <small><i>Feb. 2, 2012</i></small> &mdash; <a href="https://github.com/documentcloud/backbone/compare/0.9.0...0.9.1">Diff</a><br />
    <ul style="margin-top: 5px;">
      <li>
        Reverted to 0.5.3-esque behavior for validating models. Silent changes
        no longer trigger validation (making it easier to work with forms).
        Added an <tt>isValid</tt> function that you can use to check if a model
        is currently in a valid state.
      </li>
      <li>
        If you have multiple versions of jQuery on the page, you can now tell
        Backbone which one to use with <tt>Backbone.setDomLibrary</tt>.
      </li>
      <li>
        Fixes regressions in <b>0.9.0</b> for routing with "root", saving with
        both "wait" and "validate", and the order of nested "change" events.
      </li>
    </ul>

    <b class="header">0.9.0</b> &mdash; <small><i>Jan. 30, 2012</i></small> &mdash; <a href="https://github.com/documentcloud/backbone/compare/0.5.3...0.9.0">Diff</a><br />
    <ul style="margin-top: 5px;">
      <li>
        Creating and destroying models with <tt>create</tt> and <tt>destroy</tt>
        are now optimistic by default. Pass <tt>{wait: true}</tt> as an option
        if you'd like them to wait for a successful server response to proceed.
      </li>
      <li>
        Two new properties on views: <tt>$el</tt> &mdash; a cached jQuery (or Zepto)
        reference to the view's element, and <tt>setElement</tt>, which should
        be used instead of manually setting a view's <tt>el</tt>. It will
        both set <tt>view.el</tt> and <tt>view.$el</tt> correctly, as well as
        re-delegating events on the new DOM element.
      </li>
      <li>
        You can now bind and trigger multiple spaced-delimited events at once.
        For example: <tt>model.on("change:name change:age", ...)</tt>
      </li>
      <li>
        When you don't know the key in advance, you may now call
        <tt>model.set(key, value)</tt> as well as <tt>save</tt>.
      </li>
      <li>
        Multiple models with the same <tt>id</tt> are no longer allowed in a
        single collection.
      </li>
      <li>
        Added a <tt>"sync"</tt> event, which triggers whenever a model's state
        has been successfully synced with the server (create, save, destroy).
      </li>
      <li>
        <tt>bind</tt> and <tt>unbind</tt> have been renamed to <tt>on</tt>
        and <tt>off</tt> for clarity, following jQuery's lead.
        The old names are also still supported.
      </li>
      <li>
        A Backbone collection's <tt>comparator</tt> function may now behave
        either like a <a href="http://underscorejs.org/#sortBy">sortBy</a>
        (pass a function that takes a single argument),
        or like a <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort">sort</a>
        (pass a comparator function that expects two arguments). The comparator
        function is also now bound by default to the collection &mdash; so you
        can refer to <tt>this</tt> within it.
      </li>
      <li>
        A view's <tt>events</tt> hash may now also contain direct function
        values as well as the string names of existing view methods.
      </li>
      <li>
        Validation has gotten an overhaul &mdash; a model's <tt>validate</tt> function
        will now be run even for silent changes, and you can no longer create
        a model in an initially invalid state.
      </li>
      <li>
        Added <tt>shuffle</tt> and <tt>initial</tt> to collections, proxied
        from Underscore.
      </li>
      <li>
        <tt>Model#urlRoot</tt> may now be defined as a function as well as a
        value.
      </li>
      <li>
        <tt>View#attributes</tt> may now be defined as a function as well as a
        value.
      </li>
      <li>
        Calling <tt>fetch</tt> on a collection will now cause all fetched JSON
        to be run through the collection's model's <tt>parse</tt> function, if
        one is defined.
      </li>
      <li>
        You may now tell a router to <tt>navigate(fragment, {replace: true})</tt>,
        which will either use <tt>history.replaceState</tt> or
        <tt>location.hash.replace</tt>, in order to change the URL without adding
        a history entry.
      </li>
      <li>
        Within a collection's <tt>add</tt> and <tt>remove</tt> events, the index
        of the model being added or removed is now available as <tt>options.index</tt>.
      </li>
      <li>
        Added an <tt>undelegateEvents</tt> to views, allowing you to manually
        remove all configured event delegations.
      </li>
      <li>
        Although you shouldn't be writing your routes with them in any case &mdash;
        leading slashes (<tt>/</tt>) are now stripped from routes.
      </li>
      <li>
        Calling <tt>clone</tt> on a model now only passes the attributes
        for duplication, not a reference to the model itself.
      </li>
    </ul>

    <p>
      <b class="header">0.5.3</b> &mdash; <small><i>August 9, 2011</i></small><br />
      A View's <tt>events</tt> property may now be defined as a function, as well
      as an object literal, making it easier to programmatically define and inherit
      events. <tt>groupBy</tt> is now proxied from Underscore as a method on Collections.
      If the server has already rendered everything on page load, pass
      <tt>Backbone.history.start({silent: true})</tt> to prevent the initial route
      from triggering. Bugfix for pushState with encoded URLs.
    </p>

    <p>
      <b class="header">0.5.2</b> &mdash; <small><i>July 26, 2011</i></small><br />
      The <tt>bind</tt> function, can now take an optional third argument, to specify
      the <tt>this</tt> of the callback function.
      Multiple models with the same <tt>id</tt> are now allowed in a collection.
      Fixed a bug where calling <tt>.fetch(jQueryOptions)</tt> could cause an
      incorrect URL to be serialized.
      Fixed a brief extra route fire before redirect, when degrading from
      <tt>pushState</tt>.
    </p>

    <p>
      <b class="header">0.5.1</b> &mdash; <small><i>July 5, 2011</i></small><br />
      Cleanups from the 0.5.0 release, to wit: improved transparent upgrades from
      hash-based URLs to pushState, and vice-versa. Fixed inconsistency with
      non-modified attributes being passed to <tt>Model#initialize</tt>. Reverted
      a <b>0.5.0</b> change that would strip leading hashbangs from routes.
      Added <tt>contains</tt> as an alias for <tt>includes</tt>.
    </p>

    <p>
      <b class="header">0.5.0</b> &mdash; <small><i>July 1, 2011</i></small><br />
      A large number of tiny tweaks and micro bugfixes, best viewed by looking
      at <a href="https://github.com/documentcloud/backbone/compare/0.3.3...0.5.0">the commit diff</a>.
      HTML5 <tt>pushState</tt> support, enabled by opting-in with:
      <tt>Backbone.history.start({pushState: true})</tt>.
      <tt>Controller</tt> was renamed to <tt>Router</tt>, for clarity.
      <tt>Collection#refresh</tt> was renamed to <tt>Collection#reset</tt> to emphasize
      its ability to both reset the collection with new models, as well as empty
      out the collection when used with no parameters.
      <tt>saveLocation</tt> was replaced with <tt>navigate</tt>.
      RESTful persistence methods (save, fetch, etc.) now return the jQuery deferred
      object for further success/error chaining and general convenience.
      Improved XSS escaping for <tt>Model#escape</tt>.
      Added a <tt>urlRoot</tt> option to allow specifying RESTful urls without
      the use of a collection.
      An error is thrown if <tt>Backbone.history.start</tt> is called multiple times.
      <tt>Collection#create</tt> now validates before initializing the new model.
      <tt>view.el</tt> can now be a jQuery string lookup.
      Backbone Views can now also take an <tt>attributes</tt> parameter.
      <tt>Model#defaults</tt> can now be a function as well as a literal attributes
      object.
    </p>

    <p>
      <b class="header">0.3.3</b> &mdash; <small><i>Dec 1, 2010</i></small><br />
      Backbone.js now supports <a href="http://zeptojs.com">Zepto</a>, alongside
      jQuery, as a framework for DOM manipulation and Ajax support.
      Implemented <a href="#Model-escape">Model#escape</a>, to efficiently handle
      attributes intended for HTML interpolation. When trying to persist a model,
      failed requests will now trigger an <tt>"error"</tt> event. The
      ubiquitous <tt>options</tt> argument is now passed as the final argument
      to all <tt>"change"</tt> events.
    </p>

    <p>
      <b class="header">0.3.2</b> &mdash; <small><i>Nov 23, 2010</i></small><br />
      Bugfix for IE7 + iframe-based "hashchange" events. <tt>sync</tt> may now be
      overridden on a per-model, or per-collection basis. Fixed recursion error
      when calling <tt>save</tt> with no changed attributes, within a
      <tt>"change"</tt> event.
    </p>

    <p>
      <b class="header">0.3.1</b> &mdash; <small><i>Nov 15, 2010</i></small><br />
      All <tt>"add"</tt> and <tt>"remove"</tt> events are now sent through the
      model, so that views can listen for them without having to know about the
      collection. Added a <tt>remove</tt> method to <a href="#View">Backbone.View</a>.
      <tt>toJSON</tt> is no longer called at all for <tt>'read'</tt> and <tt>'delete'</tt> requests.
      Backbone routes are now able to load empty URL fragments.
    </p>

    <p>
      <b class="header">0.3.0</b> &mdash; <small><i>Nov 9, 2010</i></small><br />
      Backbone now has <a href="#Controller">Controllers</a> and
      <a href="#History">History</a>, for doing client-side routing based on
      URL fragments.
      Added <tt>emulateHTTP</tt> to provide support for legacy servers that don't
      do <tt>PUT</tt> and <tt>DELETE</tt>.
      Added <tt>emulateJSON</tt> for servers that can't accept <tt>application/json</tt>
      encoded requests.
      Added <a href="#Model-clear">Model#clear</a>, which removes all attributes
      from a model.
      All Backbone classes may now be seamlessly inherited by CoffeeScript classes.
    </p>

    <p>
      <b class="header">0.2.0</b> &mdash; <small><i>Oct 25, 2010</i></small><br />
      Instead of requiring server responses to be namespaced under a <tt>model</tt>
      key, now you can define your own <a href="#Model-parse">parse</a> method
      to convert responses into attributes for Models and Collections.
      The old <tt>handleEvents</tt> function is now named
      <a href="#View-delegateEvents">delegateEvents</a>, and is automatically
      called as part of the View's constructor.
      Added a <a href="#Collection-toJSON">toJSON</a> function to Collections.
      Added <a href="#Collection-chain">Underscore's chain</a> to Collections.
    </p>

    <p>
      <b class="header">0.1.2</b> &mdash; <small><i>Oct 19, 2010</i></small><br />
      Added a <a href="#Model-fetch">Model#fetch</a> method for refreshing the
      attributes of single model from the server.
      An <tt>error</tt> callback may now be passed to <tt>set</tt> and <tt>save</tt>
      as an option, which will be invoked if validation fails, overriding the
      <tt>"error"</tt> event.
      You can now tell backbone to use the <tt>_method</tt> hack instead of HTTP
      methods by setting <tt>Backbone.emulateHTTP = true</tt>.
      Existing Model and Collection data is no longer sent up unnecessarily with
      <tt>GET</tt> and <tt>DELETE</tt> requests. Added a <tt>rake lint</tt> task.
      Backbone is now published as an <a href="http://npmjs.org">NPM</a> module.
    </p>

    <p>
      <b class="header">0.1.1</b> &mdash; <small><i>Oct 14, 2010</i></small><br />
      Added a convention for <tt>initialize</tt> functions to be called
      upon instance construction, if defined. Documentation tweaks.
    </p>

    <p>
      <b class="header">0.1.0</b> &mdash; <small><i>Oct 13, 2010</i></small><br />
      Initial Backbone release.
    </p>

    <p>
      <br />
      <a href="http://documentcloud.org/" title="A DocumentCloud Project" style="background:none;">
        <img src="http://jashkenas.s3.amazonaws.com/images/a_documentcloud_project.png" alt="A DocumentCloud Project" style="position:relative;left:-10px;" />
      </a>
    </p>

  </div>

  <script src="test/vendor/underscore-1.3.1.js"></script>
  <script src="test/vendor/jquery-1.7.1.js"></script>
  <script src="test/vendor/json2.js"></script>
  <script src="backbone.js"></script>

  <script>
    // Set up the "play" buttons for each runnable code example.
    $(function() {
      $('.runnable').each(function() {
        var code = this;
        var button = '<div class="run" title="Run"></div>';
        $(button).insertBefore(code).bind('click', function(){
          eval($(code).text());
        });
      });
    });
  </script>

</body>
</html>
